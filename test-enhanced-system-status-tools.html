<!DOCTYPE html>
<html>
<head>
    <title>Enhanced System Status Tools Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { background: #f5f5f5; padding: 15px; margin: 10px 0; border-radius: 5px; }
        button { padding: 10px 15px; margin: 5px; background: #007bff; color: white; border: none; border-radius: 3px; cursor: pointer; }
        .result { background: white; padding: 15px; margin: 10px 0; border: 1px solid #ddd; border-radius: 3px; font-family: monospace; white-space: pre-wrap; }
    </style>
</head>
<body>
    <h1>Enhanced System Status Tools Test</h1>
    <div class="test-section">
        <h2>Test Controls</h2>
        <button onclick="setupMockData()">Setup Mock Data</button>
        <button onclick="testGetCurrentState()">Get Current State</button>
        <button onclick="testGetSelectedGene()">Get Selected Gene</button>
        <button onclick="simulateGeneSelection()">Simulate Gene Selection</button>
    </div>
    <div id="results"></div>
    <script>
        function displayResult(result, title) {
            document.getElementById("results").innerHTML = `<div class="result"><h3>${title}</h3>${JSON.stringify(result, null, 2)}</div>`;
        }
        function setupMockData() {
            window.mockApp = {
                currentChromosome: "NC_000913.3",
                currentPosition: { start: 1000, end: 5000 },
                selectedGene: null,
                sequenceSelection: { active: false }
            };
            displayResult({ success: true, message: "Mock data setup complete" }, "Setup Complete");
        }
        function testGetCurrentState() {
            if (!window.mockApp) return displayResult({ error: "Setup mock data first" }, "Error");
            const state = {
                currentChromosome: window.mockApp.currentChromosome,
                currentPosition: window.mockApp.currentPosition,
                selectedGene: window.mockApp.selectedGene,
                sequenceSelection: window.mockApp.sequenceSelection
            };
            displayResult(state, "Current State");
        }
        function simulateGeneSelection() {
            if (!window.mockApp) return displayResult({ error: "Setup mock data first" }, "Error");
            window.mockApp.selectedGene = {
                gene: { qualifiers: { gene: "lysC", locus_tag: "b0002" }, start: 1000, end: 2500, strand: 1 }
            };
            displayResult({ success: true, message: "Gene selected" }, "Gene Selection");
        }
        function testGetSelectedGene() {
            if (!window.mockApp) return displayResult({ error: "Setup mock data first" }, "Error");
            if (!window.mockApp.selectedGene) {
                displayResult({ selected: false, message: "No gene selected" }, "Selected Gene");
            } else {
                const gene = window.mockApp.selectedGene.gene;
                displayResult({
                    selected: true,
                    geneName: gene.qualifiers.gene,
                    locusTag: gene.qualifiers.locus_tag,
                    start: gene.start,
                    end: gene.end
                }, "Selected Gene");
            }
        }
    </script>
</body>
</html>
