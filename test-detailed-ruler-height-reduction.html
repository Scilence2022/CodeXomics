<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äºŒçº§æ ‡å°ºå†…éƒ¨ç»˜å›¾é«˜åº¦è°ƒæ•´æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 20px;
            background: #f5f5f5;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 15px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            background: #fafafa;
        }
        
        .ruler-demo {
            margin: 10px 0;
            position: relative;
        }
        
        .detailed-ruler-container {
            position: relative;
            height: 35px;
            background: linear-gradient(to bottom, #f8f9fa, #e9ecef);
            border-bottom: 1px solid #dee2e6;
            margin-bottom: 0px;
            z-index: 10;
            overflow: visible;
            box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);
        }
        
        .detailed-ruler-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 11;
        }
        
        .before-after {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        
        .demo-label {
            font-weight: bold;
            margin-bottom: 10px;
            padding: 8px;
            background: #e3f2fd;
            border-radius: 4px;
            text-align: center;
        }
        
        .old-style {
            background: #ffebee;
        }
        
        .new-style {
            background: #e8f5e8;
        }
        
        .info-box {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 4px;
            padding: 15px;
            margin: 20px 0;
        }
        
        .changes-list {
            background: #f8f9fa;
            border-left: 4px solid #007bff;
            padding: 15px;
            margin: 15px 0;
        }
        
        .changes-list ul {
            margin: 0;
            padding-left: 20px;
        }
        
        .changes-list li {
            margin: 8px 0;
        }
        
        .test-instructions {
            background: #e7f3ff;
            border: 1px solid #b3d9ff;
            border-radius: 6px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .test-instructions h4 {
            margin-top: 0;
            color: #0056b3;
        }
        
        .test-instructions ol {
            margin: 10px 0;
            padding-left: 20px;
        }
        
        .test-instructions li {
            margin: 8px 0;
            line-height: 1.5;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ”§ äºŒçº§æ ‡å°ºå†…éƒ¨ç»˜å›¾é«˜åº¦è°ƒæ•´æµ‹è¯•</h1>
        
        <div class="info-box">
            <h3>ğŸ“‹ ä¿®æ”¹è¯´æ˜</h3>
            <p>æœ¬æ¬¡ä¿®æ”¹è°ƒæ•´äº†åŸºå› ç»„æµè§ˆå™¨ä¸­äºŒçº§æ ‡å°ºï¼ˆè¯¦ç»†æ ‡å°ºï¼‰çš„å†…éƒ¨ç»˜å›¾é«˜åº¦ï¼Œä½¿å…¶åœ¨ä¿æŒ35pxå®¹å™¨é«˜åº¦ä¸å˜çš„æƒ…å†µä¸‹ï¼Œå†…éƒ¨å…ƒç´ å ç”¨æ›´å°‘çš„å‚ç›´ç©ºé—´ï¼Œè§†è§‰æ•ˆæœæ›´åŠ ç´§å‡‘ã€‚</p>
        </div>
        
        <div class="changes-list">
            <h4>ğŸ¯ å…·ä½“æ”¹åŠ¨é¡¹ç›®ï¼š</h4>
            <ul>
                <li><strong>å­—ä½“å¤§å°ï¼š</strong>ä» 11px å‡å°åˆ° 10px</li>
                <li><strong>ä¸»è¦åˆ»åº¦çº¿ï¼š</strong>ä» 0-22px è°ƒæ•´ä¸º 3-19pxï¼ˆé«˜åº¦ä»22pxå‡å°‘åˆ°16pxï¼‰</li>
                <li><strong>æ¬¡è¦åˆ»åº¦çº¿ï¼š</strong>ä» 0-10px è°ƒæ•´ä¸º 3-10pxï¼ˆé«˜åº¦ä»10pxå‡å°‘åˆ°7pxï¼‰</li>
                <li><strong>æ ‡ç­¾ä½ç½®ï¼š</strong>ä» y=32 ä¸Šç§»åˆ° y=28</li>
                <li><strong>æ•´ä½“æ•ˆæœï¼š</strong>å†…éƒ¨ç»˜å›¾åœ¨35pxå®¹å™¨å†…æ›´åŠ ç´§å‡‘ï¼Œç•™å‡ºæ›´å¤šç©ºç™½ç©ºé—´</li>
            </ul>
        </div>
        
        <div class="test-section">
            <h3>ğŸ“Š è§†è§‰å¯¹æ¯”æ¼”ç¤º</h3>
            <div class="before-after">
                <div>
                    <div class="demo-label old-style">ä¿®æ”¹å‰ - åŸå§‹é«˜åº¦</div>
                    <div class="ruler-demo">
                        <canvas id="oldRuler" width="500" height="35" class="detailed-ruler-canvas"></canvas>
                    </div>
                    <p><small>åˆ»åº¦çº¿è¾ƒé•¿ï¼Œå­—ä½“è¾ƒå¤§ï¼Œæ•´ä½“å ç”¨æ›´å¤šå‚ç›´ç©ºé—´</small></p>
                </div>
                
                <div>
                    <div class="demo-label new-style">ä¿®æ”¹å - ç´§å‡‘é«˜åº¦</div>
                    <div class="ruler-demo">
                        <canvas id="newRuler" width="500" height="35" class="detailed-ruler-canvas"></canvas>
                    </div>
                    <p><small>åˆ»åº¦çº¿è¾ƒçŸ­ï¼Œå­—ä½“è¾ƒå°ï¼Œæ•´ä½“æ›´åŠ ç´§å‡‘</small></p>
                </div>
            </div>
        </div>
        
        <div class="test-instructions">
            <h4>ğŸ§ª æµ‹è¯•æŒ‡å—</h4>
            <ol>
                <li>æ‰“å¼€ GenomeExplorer åº”ç”¨ç¨‹åº</li>
                <li>åŠ è½½ä»»æ„åŸºå› ç»„æ–‡ä»¶ï¼ˆFASTAã€GenBankç­‰ï¼‰</li>
                <li>åœ¨åŸºå› ç»„æµè§ˆå™¨ä¸­æ‰“å¼€åŸºå› è½¨é“ï¼ˆGene Trackï¼‰</li>
                <li>è§‚å¯ŸåŸºå› è½¨é“ä¸Šæ–¹çš„äºŒçº§æ ‡å°ºï¼ˆè¯¦ç»†æ ‡å°ºï¼‰</li>
                <li><strong>æ£€æŸ¥è¦ç‚¹ï¼š</strong>
                    <ul>
                        <li>æ ‡å°ºå®¹å™¨é«˜åº¦ä»ä¸º35pxï¼ˆæœªæ”¹å˜ï¼‰</li>
                        <li>åˆ»åº¦çº¿é«˜åº¦æ˜æ˜¾å‡å°‘ï¼Œæ›´åŠ ç´§å‡‘</li>
                        <li>æ ‡ç­¾å­—ä½“ç¨å°ï¼Œä½ç½®ç•¥æœ‰ä¸Šç§»</li>
                        <li>æ•´ä½“è§†è§‰æ•ˆæœæ›´åŠ ç²¾ç®€</li>
                        <li>åŠŸèƒ½å®Œå…¨æ­£å¸¸ï¼Œæ‰€æœ‰äº¤äº’ä¿æŒä¸å˜</li>
                    </ul>
                </li>
                <li>ç¼©æ”¾åŸºå› ç»„è§†å›¾ï¼ŒéªŒè¯æ ‡å°ºåœ¨ä¸åŒå°ºåº¦ä¸‹çš„æ˜¾ç¤ºæ•ˆæœ</li>
                <li>æ‹–æ‹½æµè§ˆå™¨çª—å£å¤§å°ï¼Œç¡®è®¤æ ‡å°ºå“åº”å¼è°ƒæ•´æ­£å¸¸</li>
            </ol>
        </div>
        
        <div class="test-section">
            <h3>âœ… é¢„æœŸæ•ˆæœ</h3>
            <ul>
                <li>äºŒçº§æ ‡å°ºå¤–è§‚æ›´åŠ ç´§å‡‘ï¼Œå‡å°‘è§†è§‰å¹²æ‰°</li>
                <li>åŸºå› è½¨é“ä¸æ ‡å°ºä¹‹é—´çš„è§†è§‰å¹³è¡¡æ›´å¥½</li>
                <li>ä¿æŒæ‰€æœ‰åŸæœ‰åŠŸèƒ½å’Œäº¤äº’ç‰¹æ€§</li>
                <li>åœ¨ä¸åŒè®¾å¤‡å’Œåˆ†è¾¨ç‡ä¸‹è¡¨ç°ä¸€è‡´</li>
                <li>ä¸æ•´ä½“UIé£æ ¼æ›´åŠ åè°ƒ</li>
            </ul>
        </div>
        
        <div class="info-box">
            <h4>ğŸ” æŠ€æœ¯ç»†èŠ‚</h4>
            <p><strong>ä¿®æ”¹æ–‡ä»¶ï¼š</strong> <code>src/renderer/modules/TrackRenderer.js</code></p>
            <p><strong>ä¿®æ”¹æ–¹æ³•ï¼š</strong> <code>drawDetailedRuler(ctx, width, chromosome)</code></p>
            <p><strong>è®¾è®¡åŸåˆ™ï¼š</strong> åœ¨ä¸æ”¹å˜å®¹å™¨å°ºå¯¸çš„å‰æä¸‹ï¼Œä¼˜åŒ–å†…éƒ¨ç»˜å›¾å…ƒç´ çš„ç©ºé—´åˆ©ç”¨ï¼Œå®ç°æ›´ç´§å‡‘çš„è§†è§‰æ•ˆæœã€‚</p>
        </div>
    </div>
    
    <script>
        // ç»˜åˆ¶ä¿®æ”¹å‰çš„æ ‡å°ºæ ·å¼
        function drawOldRuler() {
            const canvas = document.getElementById('oldRuler');
            const ctx = canvas.getContext('2d');
            const width = 500;
            
            // Clear canvas
            ctx.clearRect(0, 0, width, 35);
            
            // Fill background
            const gradient = ctx.createLinearGradient(0, 0, 0, 35);
            gradient.addColorStop(0, '#f8f9fa');
            gradient.addColorStop(1, '#e9ecef');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, width, 35);
            
            // åŸå§‹æ ·å¼è®¾ç½®
            ctx.strokeStyle = '#6c757d';
            ctx.fillStyle = '#495057';
            ctx.font = '11px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            
            // ç»˜åˆ¶ä¸»è¦åˆ»åº¦çº¿ï¼ˆåŸå§‹é«˜åº¦ï¼‰
            for (let i = 0; i <= 10; i++) {
                const x = i * 50;
                ctx.beginPath();
                ctx.moveTo(x, 0);  // åŸå§‹ï¼šä»0å¼€å§‹
                ctx.lineTo(x, 22); // åŸå§‹ï¼šåˆ°22ç»“æŸ
                ctx.stroke();
                
                // æ ‡ç­¾ï¼ˆåŸå§‹ä½ç½®ï¼‰
                ctx.fillText((i * 1000).toString(), x, 32); // åŸå§‹ï¼šy=32
            }
            
            // ç»˜åˆ¶æ¬¡è¦åˆ»åº¦çº¿ï¼ˆåŸå§‹é«˜åº¦ï¼‰
            ctx.strokeStyle = '#adb5bd';
            for (let i = 0; i < 10; i++) {
                for (let j = 1; j < 5; j++) {
                    const x = i * 50 + j * 10;
                    ctx.beginPath();
                    ctx.moveTo(x, 0);  // åŸå§‹ï¼šä»0å¼€å§‹
                    ctx.lineTo(x, 10); // åŸå§‹ï¼šåˆ°10ç»“æŸ
                    ctx.stroke();
                }
            }
            
            // ç»˜åˆ¶è¾¹æ¡†
            ctx.strokeStyle = '#dee2e6';
            ctx.beginPath();
            ctx.moveTo(0, 34.5);
            ctx.lineTo(width, 34.5);
            ctx.stroke();
        }
        
        // ç»˜åˆ¶ä¿®æ”¹åçš„æ ‡å°ºæ ·å¼
        function drawNewRuler() {
            const canvas = document.getElementById('newRuler');
            const ctx = canvas.getContext('2d');
            const width = 500;
            
            // Clear canvas
            ctx.clearRect(0, 0, width, 35);
            
            // Fill background
            const gradient = ctx.createLinearGradient(0, 0, 0, 35);
            gradient.addColorStop(0, '#f8f9fa');
            gradient.addColorStop(1, '#e9ecef');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, width, 35);
            
            // æ–°æ ·å¼è®¾ç½®
            ctx.strokeStyle = '#6c757d';
            ctx.fillStyle = '#495057';
            ctx.font = '10px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'; // æ–°ï¼š10px
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            
            // ç»˜åˆ¶ä¸»è¦åˆ»åº¦çº¿ï¼ˆæ–°é«˜åº¦ï¼‰
            for (let i = 0; i <= 10; i++) {
                const x = i * 50;
                ctx.beginPath();
                ctx.moveTo(x, 3);  // æ–°ï¼šä»3å¼€å§‹
                ctx.lineTo(x, 19); // æ–°ï¼šåˆ°19ç»“æŸ
                ctx.stroke();
                
                // æ ‡ç­¾ï¼ˆæ–°ä½ç½®ï¼‰
                ctx.fillText((i * 1000).toString(), x, 28); // æ–°ï¼šy=28
            }
            
            // ç»˜åˆ¶æ¬¡è¦åˆ»åº¦çº¿ï¼ˆæ–°é«˜åº¦ï¼‰
            ctx.strokeStyle = '#adb5bd';
            for (let i = 0; i < 10; i++) {
                for (let j = 1; j < 5; j++) {
                    const x = i * 50 + j * 10;
                    ctx.beginPath();
                    ctx.moveTo(x, 3);  // æ–°ï¼šä»3å¼€å§‹
                    ctx.lineTo(x, 10); // æ–°ï¼šåˆ°10ç»“æŸï¼ˆé«˜åº¦ä»10å‡å°‘åˆ°7ï¼‰
                    ctx.stroke();
                }
            }
            
            // ç»˜åˆ¶è¾¹æ¡†
            ctx.strokeStyle = '#dee2e6';
            ctx.beginPath();
            ctx.moveTo(0, 34.5);
            ctx.lineTo(width, 34.5);
            ctx.stroke();
        }
        
        // é¡µé¢åŠ è½½åç»˜åˆ¶å¯¹æ¯”å›¾
        window.addEventListener('load', () => {
            drawOldRuler();
            drawNewRuler();
        });
    </script>
</body>
</html> 