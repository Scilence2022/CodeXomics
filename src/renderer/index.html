<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Genome Browser</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <div id="app">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <h1 class="app-title">
                    <i class="fas fa-dna"></i>
                    Genome Browser
                </h1>
            </div>
            <div class="header-center">
                <div class="search-container">
                    <input type="text" id="searchInput" placeholder="Search gene names or sequences..." class="search-input">
                    <button id="searchBtn" class="search-btn">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
                <div class="position-container">
                    <input type="text" id="positionInput" placeholder="Chr:start-end" class="position-input">
                    <button id="goToBtn" class="goto-btn">Go</button>
                </div>
            </div>
            <div class="header-right">
                <div class="file-menu-container">
                    <button id="optionsBtn" class="btn btn-secondary dropdown-toggle">
                        <i class="fas fa-cog"></i>
                        Options
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="dropdown-menu" id="optionsDropdownMenu">
                        <button class="dropdown-item" id="configureLLMBtn">
                            <i class="fas fa-robot"></i>
                            Configure LLMs
                        </button>
                        <div class="dropdown-divider"></div>
                        <button class="dropdown-item" id="settingsBtn">
                            <i class="fas fa-sliders-h"></i>
                            General Settings
                        </button>
                    </div>
                </div>
                
                <div class="file-menu-container">
                    <button id="openFileBtn" class="btn btn-primary dropdown-toggle">
                        <i class="fas fa-folder-open"></i>
                        Load File
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="dropdown-menu" id="fileDropdownMenu">
                        <button class="dropdown-item" id="openGenomeBtn">
                            <i class="fas fa-dna"></i>
                            Genome File (FASTA, GenBank)
                        </button>
                        <button class="dropdown-item" id="openAnnotationBtn">
                            <i class="fas fa-tags"></i>
                            Annotation File (GFF, BED)
                        </button>
                        <button class="dropdown-item" id="openVariantBtn">
                            <i class="fas fa-exclamation-triangle"></i>
                            Variant File (VCF)
                        </button>
                        <button class="dropdown-item" id="openReadsBtn">
                            <i class="fas fa-align-left"></i>
                            Reads File (SAM/BAM)
                        </button>
                        <div class="dropdown-divider"></div>
                        <button class="dropdown-item" id="openAnyBtn">
                            <i class="fas fa-file"></i>
                            Any Supported File
                        </button>
                    </div>
                </div>
                
                <div class="file-menu-container">
                    <button id="exportFileBtn" class="btn btn-secondary dropdown-toggle" disabled>
                        <i class="fas fa-download"></i>
                        Export As
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="dropdown-menu" id="exportDropdownMenu">
                        <button class="dropdown-item" id="exportFastaBtn">
                            <i class="fas fa-dna"></i>
                            FASTA Sequence
                        </button>
                        <button class="dropdown-item" id="exportGenbankBtn">
                            <i class="fas fa-file-alt"></i>
                            GenBank Format
                        </button>
                        <div class="dropdown-divider"></div>
                        <button class="dropdown-item" id="exportCDSFastaBtn">
                            <i class="fas fa-code"></i>
                            CDS FASTA
                        </button>
                        <button class="dropdown-item" id="exportProteinFastaBtn">
                            <i class="fas fa-shapes"></i>
                            Protein FASTA
                        </button>
                        <div class="dropdown-divider"></div>
                        <button class="dropdown-item" id="exportGFFBtn">
                            <i class="fas fa-tags"></i>
                            GFF Annotations
                        </button>
                        <button class="dropdown-item" id="exportBEDBtn">
                            <i class="fas fa-bed"></i>
                            BED Format
                        </button>
                        <div class="dropdown-divider"></div>
                        <button class="dropdown-item" id="exportCurrentViewBtn">
                            <i class="fas fa-eye"></i>
                            Current View (FASTA)
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Toolbar -->
        <div class="toolbar">
            <div class="toolbar-section">
                <label>Sidebar:</label>
                <button id="toggleSidebar" class="btn btn-sm toggle-btn">
                    <i class="fas fa-sidebar"></i>
                </button>
            </div>
            <div class="toolbar-section">
                <label for="chromosomeSelect">Chromosome:</label>
                <select id="chromosomeSelect" class="select">
                    <option value="">Select chromosome...</option>
                </select>
            </div>
            <div class="toolbar-section">
                <label>Zoom:</label>
                <button id="zoomInBtn" class="btn btn-sm">
                    <i class="fas fa-search-plus"></i>
                </button>
                <button id="zoomOutBtn" class="btn btn-sm">
                    <i class="fas fa-search-minus"></i>
                </button>
                <button id="resetZoomBtn" class="btn btn-sm">Reset</button>
            </div>
            <div class="toolbar-section">
                <label>Tracks:</label>
                <button id="toggleTracks" class="btn btn-sm toggle-btn">
                    <i class="fas fa-eye"></i>
                </button>
                <div class="track-checkboxes" id="trackCheckboxes" style="display: none;">
                    <label class="track-checkbox">
                        <input type="checkbox" id="trackGenes" value="genes" checked> Genes & Features
                    </label>
                    <label class="track-checkbox">
                        <input type="checkbox" id="trackGC" value="gc" checked> GC Content
                    </label>
                    <label class="track-checkbox">
                        <input type="checkbox" id="trackVariants" value="variants"> VCF Variants
                    </label>
                    <label class="track-checkbox">
                        <input type="checkbox" id="trackReads" value="reads"> Aligned Reads
                    </label>
                    <label class="track-checkbox">
                        <input type="checkbox" id="trackProteins" value="proteins"> Proteins
                    </label>
                    <label class="track-checkbox">
                        <input type="checkbox" id="trackBottomSequence" value="bottomSequence" checked> Sequence (Bottom)
                    </label>
                </div>
            </div>
            <div class="toolbar-section">
                <label>Show Features:</label>
                <button id="toggleFeatureFilters" class="btn btn-sm toggle-btn">
                    <i class="fas fa-filter"></i>
                </button>
                <div class="feature-filter-checkboxes" id="featureFilterCheckboxes" style="display: none;">
                    <label class="feature-checkbox">
                        <input type="checkbox" id="showGenes"> Genes
                    </label>
                    <label class="feature-checkbox">
                        <input type="checkbox" id="showCDS" checked> CDS
                    </label>
                    <label class="feature-checkbox">
                        <input type="checkbox" id="showMRNA" checked> mRNA
                    </label>
                    <label class="feature-checkbox">
                        <input type="checkbox" id="showTRNA" checked> tRNA
                    </label>
                    <label class="feature-checkbox">
                        <input type="checkbox" id="showRRNA" checked> rRNA
                    </label>
                    <label class="feature-checkbox">
                        <input type="checkbox" id="showPromoter" checked> Promoters
                    </label>
                    <label class="feature-checkbox">
                        <input type="checkbox" id="showTerminator" checked> Terminators
                    </label>
                    <label class="feature-checkbox">
                        <input type="checkbox" id="showRegulatory" checked> Regulatory
                    </label>
                    <label class="feature-checkbox">
                        <input type="checkbox" id="showOther" checked> Other Features
                    </label>
                </div>
            </div>
            
            <div class="toolbar-section">
                <label>Add Features:</label>
                <button id="addGeneBtn" class="btn btn-sm add-feature-btn" title="Add Gene">
                    <i class="fas fa-dna"></i>
                    Gene
                </button>
                <button id="addCDSBtn" class="btn btn-sm add-feature-btn" title="Add CDS">
                    <i class="fas fa-code"></i>
                    CDS
                </button>
                <button id="addRRNABtn" class="btn btn-sm add-feature-btn" title="Add rRNA">
                    <i class="fas fa-cog"></i>
                    rRNA
                </button>
                <button id="addTRNABtn" class="btn btn-sm add-feature-btn" title="Add tRNA">
                    <i class="fas fa-exchange-alt"></i>
                    tRNA
                </button>
                <button id="addCommentBtn" class="btn btn-sm add-feature-btn" title="Add Comment/Note">
                    <i class="fas fa-comment"></i>
                    Note
                </button>
                <button id="addMoreFeaturesBtn" class="btn btn-sm toggle-btn" title="More Features">
                    <i class="fas fa-plus"></i>
                </button>
                <div class="more-features-dropdown" id="moreFeaturesDropdown" style="display: none;">
                    <button class="dropdown-feature-btn" data-type="promoter">
                        <i class="fas fa-play"></i>
                        Promoter
                    </button>
                    <button class="dropdown-feature-btn" data-type="terminator">
                        <i class="fas fa-stop"></i>
                        Terminator
                    </button>
                    <button class="dropdown-feature-btn" data-type="regulatory">
                        <i class="fas fa-sliders-h"></i>
                        Regulatory
                    </button>
                    <button class="dropdown-feature-btn" data-type="misc_feature">
                        <i class="fas fa-tag"></i>
                        Other Feature
                    </button>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Sidebar -->
            <aside class="sidebar" id="sidebar">
                <div class="sidebar-section" id="geneDetailsSection" style="display: none;">
                    <div class="section-header">
                        <h3>Gene Details</h3>
                        <button class="close-panel-btn" data-panel="geneDetailsSection">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div id="geneDetailsContent" class="gene-details-content">
                        <div class="no-gene-selected">
                            <i class="fas fa-dna gene-icon"></i>
                            <p>Click on a gene in the Genes & Features track to view details</p>
                        </div>
                    </div>
                </div>
                
                <div class="sidebar-section" id="searchResultsSection" style="display: none;">
                    <div class="section-header">
                        <h3>Search Results</h3>
                        <button class="close-panel-btn" data-panel="searchResultsSection">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div id="searchResultsList" class="search-results-list">
                        <p class="no-results">No search results</p>
                    </div>
                </div>

                <div class="sidebar-section" id="operonsSection">
                    <div class="section-header">
                        <h3>Operons in View</h3>
                        <button class="close-panel-btn" data-panel="operonsSection">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div id="operonsList" class="operons-list">
                        <p class="no-operons">No operons detected in current view</p>
                    </div>
                </div>

                <div class="sidebar-section" id="tracksSection">
                    <div class="section-header">
                        <h3>Tracks</h3>
                        <button class="close-panel-btn" data-panel="tracksSection">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="track-controls">
                        <label class="track-control-item">
                            <input type="checkbox" id="sidebarTrackGenes" value="genes" checked>
                            <span>Genes & Features Track</span>
                        </label>
                        <label class="track-control-item">
                            <input type="checkbox" id="sidebarTrackGC" value="gc" checked>
                            <span>GC Content Track</span>
                        </label>
                        <label class="track-control-item">
                            <input type="checkbox" id="sidebarTrackVariants" value="variants">
                            <span>VCF Variants Track</span>
                        </label>
                        <label class="track-control-item">
                            <input type="checkbox" id="sidebarTrackReads" value="reads">
                            <span>Aligned Reads Track</span>
                        </label>
                        <label class="track-control-item">
                            <input type="checkbox" id="sidebarTrackProteins" value="proteins">
                            <span>Protein Track</span>
                        </label>
                        <label class="track-control-item">
                            <input type="checkbox" id="sidebarTrackBottomSequence" value="bottomSequence" checked>
                            <span>Sequence Track (Bottom)</span>
                        </label>
                    </div>
                </div>

                <div class="sidebar-section" id="featuresSection">
                    <div class="section-header">
                        <h3>Show Features</h3>
                        <button class="close-panel-btn" data-panel="featuresSection">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="feature-controls">
                        <label class="feature-control-item">
                            <input type="checkbox" id="sidebarShowGenes">
                            <span>Genes</span>
                        </label>
                        <label class="feature-control-item">
                            <input type="checkbox" id="sidebarShowCDS" checked>
                            <span>CDS</span>
                        </label>
                        <label class="feature-control-item">
                            <input type="checkbox" id="sidebarShowMRNA" checked>
                            <span>mRNA</span>
                        </label>
                        <label class="feature-control-item">
                            <input type="checkbox" id="sidebarShowTRNA" checked>
                            <span>tRNA</span>
                        </label>
                        <label class="feature-control-item">
                            <input type="checkbox" id="sidebarShowRRNA" checked>
                            <span>rRNA</span>
                        </label>
                        <label class="feature-control-item">
                            <input type="checkbox" id="sidebarShowPromoter" checked>
                            <span>Promoters</span>
                        </label>
                        <label class="feature-control-item">
                            <input type="checkbox" id="sidebarShowTerminator" checked>
                            <span>Terminators</span>
                        </label>
                        <label class="feature-control-item">
                            <input type="checkbox" id="sidebarShowRegulatory" checked>
                            <span>Regulatory Sites</span>
                        </label>
                        <label class="feature-control-item">
                            <input type="checkbox" id="sidebarShowOther" checked>
                            <span>Other Features</span>
                        </label>
                    </div>
                </div>
                
                <div class="sidebar-section" id="fileInfoSection">
                    <div class="section-header">
                        <h3>File Information</h3>
                        <button class="close-panel-btn" data-panel="fileInfoSection">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div id="fileInfo" class="file-info">
                        <p class="no-file">No file loaded</p>
                    </div>
                </div>
                
                <div class="sidebar-section" id="navigationSection">
                    <div class="section-header">
                        <h3>Navigation</h3>
                        <button class="close-panel-btn" data-panel="navigationSection">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="navigation-controls">
                        <button id="prevBtn" class="btn btn-block">
                            <i class="fas fa-chevron-left"></i>
                            Previous
                        </button>
                        <button id="nextBtn" class="btn btn-block">
                            Next
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>

                <div class="sidebar-section" id="statisticsSection">
                    <div class="section-header">
                        <h3>Statistics</h3>
                        <button class="close-panel-btn" data-panel="statisticsSection">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div id="stats" class="stats">
                        <div class="stat-item">
                            <span class="stat-label">Length:</span>
                            <span class="stat-value" id="sequenceLength">-</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">GC Content:</span>
                            <span class="stat-value" id="gcContent">-</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Current Position:</span>
                            <span class="stat-value" id="currentPosition">-</span>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Horizontal Splitter -->
            <div class="horizontal-splitter" id="horizontalSplitter" style="display: flex;">
                <button class="splitter-toggle-btn" id="splitterToggleBtn" title="Toggle Sidebar">
                    <i class="fas fa-chevron-left"></i>
                </button>
            </div>

            <!-- Viewer Area -->
            <div class="viewer-container" id="viewerContainer">
                <!-- Navigation Controls for Genome View -->
                <div class="genome-navigation" id="genomeNavigation" style="display: none;">
                    <button id="prevBtnGenome" class="nav-btn nav-btn-left">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <button id="nextBtnGenome" class="nav-btn nav-btn-right">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>

                <!-- Main Genome Viewer Section -->
                <div class="genome-viewer-section" id="genomeViewerSection">
                    <div id="genomeViewer" class="genome-viewer">
                        
                    </div>
                </div>
            
            <div class="welcome-screen">
                <div class="welcome-content">
                    <i class="fas fa-dna welcome-icon"></i>
                    <h2>Welcome to Genome Browser</h2>
                    <p>Choose a file type to start exploring</p>
                    <div class="welcome-buttons">
                        <button id="welcomeOpenGenomeBtn" class="btn btn-primary btn-lg">
                            <i class="fas fa-dna"></i>
                            Genome File
                        </button>
                        <button id="welcomeOpenAnnotationBtn" class="btn btn-secondary btn-lg">
                            <i class="fas fa-tags"></i>
                            Annotation File
                        </button>
                        <button id="welcomeOpenVariantBtn" class="btn btn-secondary btn-lg">
                            <i class="fas fa-exclamation-triangle"></i>
                            Variant File
                        </button>
                        <button id="welcomeOpenReadsBtn" class="btn btn-secondary btn-lg">
                            <i class="fas fa-align-left"></i>
                            Reads File
                        </button>
                    </div>
                    <p class="welcome-note">
                        <small>Supported formats: FASTA, GenBank, GFF, BED, VCF, SAM/BAM</small>
                    </p>
                </div>
            </div>
                


                
                <!-- Resizable Splitter -->
                <div class="splitter" id="splitter" style="display: none;"></div>
                
                <!-- Bottom Sequence Display Section -->
                <div class="sequence-display-section" id="sequenceDisplaySection" style="display: none;">
                    <div id="sequenceDisplay" class="sequence-display">
                        <div class="sequence-header">
                            <h4 id="sequenceTitle">Sequence View</h4>
                            <div class="sequence-controls">
                                <button id="toggleSequencePanel" class="btn btn-sm" title="Hide/Show Sequence Panel">
                                    <i class="fas fa-chevron-down"></i>
                                </button>
                                <button id="copySequenceBtn" class="btn btn-sm">
                                    <i class="fas fa-copy"></i>
                                    Copy
                                </button>
                                <button id="exportBtn" class="btn btn-sm">
                                    <i class="fas fa-download"></i>
                                    Export
                                </button>
                            </div>
                        </div>
                        <div id="sequenceContent" class="sequence-content"></div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Status Bar -->
        <footer class="status-bar">
            <div class="status-left">
                <span id="statusText">Ready</span>
            </div>
            <div class="status-right">
                <span id="coordinateDisplay">Position: -</span>
            </div>
        </footer>
    </div>

    <!-- Modals -->
    <div id="searchModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Search Sequence</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <input type="text" id="modalSearchInput" placeholder="Enter gene name or DNA sequence..." class="input-full">
                <div class="search-options">
                    <label>
                        <input type="checkbox" id="caseSensitive"> Case sensitive
                    </label>
                    <label>
                        <input type="checkbox" id="reverseComplement"> Include reverse complement
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button id="modalSearchBtn" class="btn btn-primary">Search</button>
                <button class="btn modal-close">Cancel</button>
            </div>
        </div>
    </div>

    <div id="gotoModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Go to Position</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <input type="text" id="modalPositionInput" placeholder="Chr:start-end or position" class="input-full">
                <p class="help-text">Examples: chr1:1000-2000, 1500, chr2:500000</p>
            </div>
            <div class="modal-footer">
                <button id="modalGotoBtn" class="btn btn-primary">Go</button>
                <button class="btn modal-close">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Add Feature Modal -->
    <div id="addFeatureModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="addFeatureModalTitle">Add Feature</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="featureType">Feature Type:</label>
                    <select id="featureType" class="select">
                        <option value="gene">Gene</option>
                        <option value="CDS">CDS</option>
                        <option value="rRNA">rRNA</option>
                        <option value="tRNA">tRNA</option>
                        <option value="promoter">Promoter</option>
                        <option value="terminator">Terminator</option>
                        <option value="regulatory">Regulatory</option>
                        <option value="misc_feature">Other Feature</option>
                        <option value="comment">Comment/Note</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="featureName">Name/Label:</label>
                    <input type="text" id="featureName" placeholder="Enter feature name..." class="input-full">
                </div>
                <div class="form-group">
                    <label for="featureChromosome">Chromosome:</label>
                    <select id="featureChromosome" class="select"></select>
                </div>
                <div class="form-group">
                    <label for="featureStart">Start Position:</label>
                    <input type="number" id="featureStart" min="1" class="input-full">
                </div>
                <div class="form-group">
                    <label for="featureEnd">End Position:</label>
                    <input type="number" id="featureEnd" min="1" class="input-full">
                </div>
                <div class="form-group">
                    <label for="featureStrand">Strand:</label>
                    <select id="featureStrand" class="select">
                        <option value="1">Forward (+)</option>
                        <option value="-1">Reverse (-)</option>
                        <option value="0">Both/Unknown</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="featureDescription">Description (optional):</label>
                    <textarea id="featureDescription" placeholder="Enter feature description..." class="input-full" rows="3"></textarea>
                </div>
                <div class="form-group" id="sequenceSelectionInfo" style="display: none;">
                    <div class="selection-info">
                        <i class="fas fa-info-circle"></i>
                        <span id="selectionText">Using selected sequence region</span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="addFeatureBtn" class="btn btn-primary">Add Feature</button>
                <button class="btn modal-close">Cancel</button>
            </div>
        </div>
    </div>

    <!-- LLM Configuration Modal -->
    <div id="llmConfigModal" class="modal">
        <div class="modal-content llm-config-modal">
            <div class="modal-header">
                <h3>Configure LLMs</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="llm-provider-tabs">
                    <button class="tab-button active" data-provider="openai">OpenAI</button>
                    <button class="tab-button" data-provider="anthropic">Anthropic</button>
                    <button class="tab-button" data-provider="google">Google</button>
                    <button class="tab-button" data-provider="local">Local LLM</button>
                </div>
                
                <div class="llm-provider-config">
                    <!-- OpenAI Configuration -->
                    <div id="openai-config" class="provider-config active">
                        <div class="form-group">
                            <label for="openaiApiKey">API Key:</label>
                            <div class="input-with-button">
                                <input type="password" id="openaiApiKey" placeholder="sk-..." class="input-full">
                                <button type="button" class="btn btn-sm btn-paste" id="pasteOpenaiApiKeyBtn" title="Paste API Key">
                                    <i class="fas fa-paste"></i>
                                </button>
                            </div>
                            <small class="help-text">Get your API key from <a href="https://platform.openai.com/api-keys" target="_blank">OpenAI Platform</a></small>
                        </div>
                        <div class="form-group">
                            <label for="openaiModel">Model:</label>
                            <select id="openaiModel" class="select">
                                <option value="gpt-4o">GPT-4o</option>
                                <option value="gpt-4o-mini">GPT-4o Mini</option>
                                <option value="gpt-4">GPT-4</option>
                                <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="openaiBaseUrl">Base URL (optional):</label>
                            <input type="text" id="openaiBaseUrl" placeholder="https://api.openai.com/v1" class="input-full">
                        </div>
                    </div>
                    
                    <!-- Anthropic Configuration -->
                    <div id="anthropic-config" class="provider-config">
                        <div class="form-group">
                            <label for="anthropicApiKey">API Key:</label>
                            <div class="input-with-button">
                                <input type="password" id="anthropicApiKey" placeholder="sk-ant-..." class="input-full">
                                <button type="button" class="btn btn-sm btn-paste" id="pasteAnthropicApiKeyBtn" title="Paste API Key">
                                    <i class="fas fa-paste"></i>
                                </button>
                            </div>
                            <small class="help-text">Get your API key from <a href="https://console.anthropic.com/" target="_blank">Anthropic Console</a></small>
                        </div>
                        <div class="form-group">
                            <label for="anthropicModel">Model:</label>
                            <select id="anthropicModel" class="select">
                                <option value="claude-3-5-sonnet-20241022">Claude 3.5 Sonnet</option>
                                <option value="claude-3-opus-20240229">Claude 3 Opus</option>
                                <option value="claude-3-haiku-20240307">Claude 3 Haiku</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="anthropicBaseUrl">Base URL (optional):</label>
                            <input type="text" id="anthropicBaseUrl" placeholder="https://api.anthropic.com" class="input-full">
                        </div>
                    </div>
                    
                    <!-- Google Configuration -->
                    <div id="google-config" class="provider-config">
                        <div class="form-group">
                            <label for="googleApiKey">API Key:</label>
                            <div class="input-with-button">
                                <input type="text" id="googleApiKey" placeholder="AI..." class="input-full">
                                <button type="button" class="btn btn-sm btn-paste" id="pasteGoogleApiKeyBtn" title="Paste API Key">
                                    <i class="fas fa-paste"></i>
                                </button>
                            </div>
                            <small class="help-text">Get your API key from <a href="https://aistudio.google.com/app/apikey" target="_blank">Google AI Studio</a></small>
                        </div>
                        <div class="form-group">
                            <label for="googleModel">Model:</label>
                            <select id="googleModel" class="select">
                                <option value="gemini-2.0-flash">Gemini 2.0 Flash (New)</option>
                                <option value="gemini-1.5-pro-latest">Gemini 1.5 Pro (Latest)</option>
                                <option value="gemini-1.5-flash-latest">Gemini 1.5 Flash (Latest)</option>
                                <option value="gemini-pro">Gemini 1.0 Pro</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="googleBaseUrl">Base URL (optional):</label>
                            <input type="text" id="googleBaseUrl" placeholder="https://generativelanguage.googleapis.com" class="input-full">
                        </div>
                    </div>
                    
                    <!-- Local LLM Configuration -->
                    <div id="local-config" class="provider-config">
                        <div class="form-group">
                            <label for="localEndpoint">API Endpoint:</label>
                            <input type="text" id="localEndpoint" placeholder="http://localhost:11434/v1" class="input-full">
                            <small class="help-text">Local LLM endpoint (Ollama, LMStudio, etc.)</small>
                        </div>
                        <div class="form-group">
                            <label for="localModel">Model Name:</label>
                            <select id="localModel" class="select input-full">
                                <option value="deepseek-r1:70b">deepseek-r1:70b</option>
                                <option value="deepseek-r1:1.5b">deepseek-r1:1.5b</option>
                                <option value="mistral-large:latest">mistral-large:latest</option>
                                <option value="llama3.1:70b">llama3.1:70b</option>
                                <option value="llama3.1:latest">llama3.1:latest</option>
                                <option value="llama3:latest">llama3:latest</option>
                                <option value="qwen2:latest">qwen2:latest</option>
                                <option value="gemma3:27b">gemma3:27b</option>
                                <option value="other">Other (specify below)</option>
                            </select>
                        </div>
                        <div class="form-group" id="localModelOtherGroup" style="display: none;">
                            <label for="localModelOther">Custom Model Name:</label>
                            <input type="text" id="localModelOther" placeholder="Enter custom model name" class="input-full">
                        </div>
                        <div class="form-group">
                            <label for="localApiKey">API Key (if required):</label>
                            <div class="input-with-button">
                                <input type="password" id="localApiKey" placeholder="Optional API key" class="input-full">
                                <button type="button" class="btn btn-sm btn-paste" id="pasteLocalApiKeyBtn" title="Paste API Key">
                                    <i class="fas fa-paste"></i>
                                </button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="localStreamingSupport"> Streaming Support
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="llm-config-status">
                    <div class="status-info">
                        <i class="fas fa-info-circle"></i>
                        <span>Current Provider: <strong id="currentProvider">None</strong></span>
                    </div>
                    <button id="testConnectionBtn" class="btn btn-secondary">
                        <i class="fas fa-plug"></i>
                        Test Connection
                    </button>
                </div>
            </div>
            <div class="modal-footer">
                <button id="saveLLMConfigBtn" class="btn btn-primary">Save Configuration</button>
                <button class="btn modal-close">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-content">
            <div class="spinner"></div>
            <p>Loading genome data...</p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <!--script src="https://cdn.jsdelivr.net/npm/igv@2.15.8/dist/igv.min.js"></script -->
    
    <!-- Load modules -->
    <script src="modules/FileManager.js"></script>
    <script src="modules/TrackRenderer.js"></script>
    <script src="modules/NavigationManager.js"></script>
    <script src="modules/UIManager.js"></script>
    <script src="modules/SequenceUtils.js"></script>
    <script src="modules/ExportManager.js"></script>
    <script src="modules/LLMConfigManager.js"></script>
    <script src="modules/ChatManager.js"></script>
    
    <!-- Main application -->
    <script src="renderer-modular.js"></script>
</body>
</html> 