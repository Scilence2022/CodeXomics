# search_gene_by_name.yaml
name: "search_gene_by_name"
version: "1.1.0"
description: "Search for genes by name or locus tag with partial matching support. Use this as a FALLBACK when jump_to_gene fails or when you need to search with partial/fuzzy matching. For direct navigation to known genes, use jump_to_gene first."
category: "navigation"
keywords: ["search", "gene", "name", "locus", "tag", "find", "locate", "gene search", "fallback", "partial match"]
priority: 2  # Lower priority than jump_to_gene

# Tool execution metadata
execution:
  type: "client"
  timeout: 10000
  retries: 2
  requires_auth: false
  requires_data: true
  requires_network: false

# Input parameters (JSON Schema format)
parameters:
  type: "object"
  properties:
    name:
      type: "string"
      description: "Gene name or locus tag to search for (e.g., 'lacZ', 'b0062', 'araA')"
      examples: ["lacZ", "b0062", "araA", "dnaA", "rpoB"]
    exact_match:
      type: "boolean"
      description: "Whether to require exact name match (default: false for partial matching)"
      default: false
    case_sensitive:
      type: "boolean"
      description: "Whether search is case sensitive (default: false)"
      default: false
    navigate_to_gene:
      type: "boolean"
      description: "Whether to automatically navigate to the gene location (default: true)"
      default: true
    include_annotations:
      type: "boolean"
      description: "Whether to include detailed gene annotations (default: true)"
      default: true
    clientId:
      type: "string"
      description: "Browser client ID for multi-window support"
      default: "default"
  required: ["name"]

# High-quality examples for few-shot learning
sample_usages:
  - user_query: "Find all genes containing 'ara'"
    tool_call: "search_gene_by_name(name='ara', exact_match=false, navigate_to_gene=false)"
    thought: "User wants to search for genes with 'ara' in the name using partial matching, not direct navigation"
    expected_result: "List of all genes containing 'ara' in their name or description"

  - user_query: "Search for gene lysC if jump_to_gene fails"
    tool_call: "search_gene_by_name(name='lysC', exact_match=false, navigate_to_gene=true)"
    thought: "Fallback search for lysC gene with partial matching and navigation"
    expected_result: "Gene lysC found using fuzzy search and browser navigates to location"

  - user_query: "Look for genes similar to 'lacz'"
    tool_call: "search_gene_by_name(name='lacz', exact_match=false, case_sensitive=false)"
    thought: "User might have typo in gene name, use fuzzy search"
    expected_result: "Finds lacZ and other similar genes despite case/spelling differences"

# Tool relationships and dependencies
relationships:
  depends_on: ["get_genome_info"]
  conflicts_with: []
  enhances: ["navigate_to_position", "get_sequence"]
  alternatives: ["jump_to_gene"]  # jump_to_gene is preferred for direct navigation
  prerequisites: []
  follow_up: ["get_sequence", "analyze_region", "get_coding_sequence"]
  recommendation: "Use jump_to_gene first for direct navigation, use this for fuzzy/partial searches"

# Performance and usage statistics
metadata:
  usage_count: 0
  success_rate: 0.0
  avg_execution_time: 0
  last_used: null
  tags: ["core", "search", "gene", "fallback", "fuzzy"]
  complexity: "simple"
  usage_pattern: "occasional"  # Less frequent than jump_to_gene
  recommendation: "Use as fallback when jump_to_gene fails or for fuzzy searching"

# Error handling
error_handling:
  gene_not_found: "Returns empty result if no genes match the search criteria"
  multiple_matches: "Returns list of all matching genes with scores"
  invalid_name: "Returns error if gene name is empty or invalid"
  no_genome_loaded: "Returns error if no genome is currently loaded"

# Return value specification
returns:
  success: "boolean - Whether search was successful"
  genes_found: "number - Number of genes matching the search"
  genes: "array - List of matching gene objects with details"
  gene_details: "object - Detailed information for each gene including position, function, annotations"
  navigation_result: "object - Result of navigation to gene (if navigate_to_gene=true)"
