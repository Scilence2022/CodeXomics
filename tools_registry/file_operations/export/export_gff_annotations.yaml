name: export_gff_annotations
version: 1.0.0
description: Export feature annotations in GFF format to specified file path
category: file_operations
keywords:
  - export
  - gff
  - annotations
  - features
priority: 1
execution:
  type: client
  timeout: 60000
  retries: 2
  requires_auth: false
  requires_data: true
  requires_network: false
parameters:
  type: object
  properties:
    filePath:
      type: string
      description: Absolute path where to save the GFF file
      examples:
        - "/path/to/export/annotations.gff"
        - "/data/features.gff3"
        - "/output/genes.gff"
    gffVersion:
      type: string
      description: GFF format version to use
      enum:
        - "gff3"
        - "gff2"
        - "gtf"
      default: "gff3"
    chromosome:
      type: string
      description: Specific chromosome to export annotations from (optional)
      examples:
        - "chr1"
        - "chromosome1"
        - "NC_000913"
    startPosition:
      type: number
      description: Start position for annotation export (1-based, optional)
      minimum: 1
    endPosition:
      type: number
      description: End position for annotation export (1-based, optional)
      minimum: 1
    featureTypes:
      type: array
      description: Specific feature types to export (optional)
      items:
        type: string
      examples:
        - ["gene", "CDS", "exon"]
        - ["tRNA", "rRNA"]
        - ["regulatory"]
    geneNames:
      type: array
      description: Specific gene names to export (optional)
      items:
        type: string
      examples:
        - ["lacZ", "recA", "dnaA"]
        - ["TP53", "BRCA1"]
    includeSequence:
      type: boolean
      description: Whether to include FASTA sequence at end of GFF file
      default: false
    includeMetadata:
      type: boolean
      description: Whether to include metadata in GFF header
      default: true
    strand:
      type: string
      description: Strand to export features from
      enum:
        - "both"
        - "plus"
        - "minus"
      default: "both"
    minLength:
      type: number
      description: Minimum feature length to include
      default: 1
      minimum: 1
    maxLength:
      type: number
      description: Maximum feature length to include
      minimum: 1
    sortBy:
      type: string
      description: How to sort features in output
      enum:
        - "position"
        - "type"
        - "name"
        - "none"
      default: "position"
    includePartial:
      type: boolean
      description: Whether to include partial features
      default: true
    overwrite:
      type: boolean
      description: Whether to overwrite existing file
      default: false
    clientId:
      type: string
      description: Browser client ID for multi-window support
      default: "default"
  required:
    - filePath

# High-quality examples for few-shot learning
sample_usages:
  - user_query: "Export all annotations as GFF3 to /data/annotations.gff3"
    tool_call: "export_gff_annotations(filePath='/data/annotations.gff3', gffVersion='gff3')"
    thought: "User wants to export all feature annotations in GFF3 format"
    expected_result: "All annotations exported to GFF3 file"

  - user_query: "Export gene and CDS features from chromosome chr1"
    tool_call: "export_gff_annotations(filePath='/output/chr1_genes.gff', chromosome='chr1', featureTypes=['gene', 'CDS'])"
    thought: "User wants to export specific feature types from specific chromosome"
    expected_result: "Gene and CDS features from chr1 exported to GFF file"

  - user_query: "Export annotations from region 10000-50000 with sequence"
    tool_call: "export_gff_annotations(filePath='/data/region_with_seq.gff', startPosition=10000, endPosition=50000, includeSequence=true)"
    thought: "User wants to export annotations from specific region including sequence data"
    expected_result: "Regional annotations exported with FASTA sequence appended"

  - user_query: "Export specific genes as GTF format sorted by name"
    tool_call: "export_gff_annotations(filePath='/genes/selected.gtf', gffVersion='gtf', geneNames=['lacZ', 'recA'], sortBy='name')"
    thought: "User wants to export specific genes in GTF format sorted by name"
    expected_result: "Selected genes exported in GTF format sorted by name"

  - user_query: "Export large features (>1000bp) from plus strand only"
    tool_call: "export_gff_annotations(filePath='/data/large_plus.gff', minLength=1000, strand='plus')"
    thought: "User wants to export filtered annotations from plus strand only"
    expected_result: "Large features from plus strand exported to GFF file"

# Tool relationships and dependencies
relationships:
  depends_on: ["load_annotation_file"]
  conflicts_with: []
  enhances: []
  alternatives: ["export_bed_format", "export_genbank_format"]
  prerequisites: ["load_annotation_file"]
  follow_up: []

# Performance and usage statistics
metadata:
  usage_count: 0
  success_rate: 0.0
  avg_execution_time: 0
  last_used: null
  tags: ["file", "export", "gff", "annotations", "features"]
  complexity: "moderate"
  usage_pattern: "common"

# Error handling
error_handling:
  no_annotations: "Returns error if no annotation data is loaded"
  no_features_found: "Returns error if no features found matching criteria"
  invalid_path: "Returns error if file path is invalid or not writable"
  invalid_region: "Returns error if start/end positions are invalid"
  chromosome_not_found: "Returns error if specified chromosome does not exist"
  feature_type_not_found: "Returns warning if specified feature types are not found"
  gene_not_found: "Returns warning if specified genes are not found"
  permission_denied: "Returns error if cannot write to specified location"
  file_exists: "Returns error if file exists and overwrite is false"
  disk_space: "Returns error if insufficient disk space for export"
  invalid_gff_version: "Returns error if specified GFF version is not supported"

# Return value specification
returns:
  success: "boolean - Whether export was successful"
  file_path: "string - Path of the exported GFF file"
  gff_version: "string - GFF format version used"
  features_exported: "number - Number of features exported"
  feature_types: "array - Types of features exported"
  genes_exported: "number - Number of unique genes exported"
  chromosomes: "array - List of chromosomes with exported features"
  strand_distribution: "object - Distribution of features by strand"
  length_stats: "object - Statistics about feature lengths"
  file_size: "number - Size of exported file in bytes"
  export_time: "number - Time taken to export in milliseconds"
  filter_results: "object - Results of applied filters"
  sort_method: "string - Sorting method applied to features"
  region_info: "object - Information about exported region if applicable"
  error_message: "string - Error message if export failed"