name: export_bed_format
version: 1.0.0
description: Export feature annotations in BED format to specified file path
category: file_operations
keywords:
  - export
  - bed
  - annotations
  - features
  - track
priority: 1
execution:
  type: client
  timeout: 60000
  retries: 2
  requires_auth: false
  requires_data: true
  requires_network: false
parameters:
  type: object
  properties:
    filePath:
      type: string
      description: Absolute path where to save the BED file
      examples:
        - "/path/to/export/features.bed"
        - "/data/annotations.bed"
        - "/output/genes.bed"
    bedFormat:
      type: string
      description: BED format type to use
      enum:
        - "bed3"
        - "bed6"
        - "bed9"
        - "bed12"
      default: "bed6"
    chromosome:
      type: string
      description: Specific chromosome to export features from (optional)
      examples:
        - "chr1"
        - "chromosome1"
        - "NC_000913"
    startPosition:
      type: number
      description: Start position for feature export (1-based, optional)
      minimum: 1
    endPosition:
      type: number
      description: End position for feature export (1-based, optional)
      minimum: 1
    featureTypes:
      type: array
      description: Specific feature types to export (optional)
      items:
        type: string
      examples:
        - ["gene", "CDS", "exon"]
        - ["tRNA", "rRNA"]
        - ["regulatory"]
    geneNames:
      type: array
      description: Specific gene names to export (optional)
      items:
        type: string
      examples:
        - ["lacZ", "recA", "dnaA"]
        - ["TP53", "BRCA1"]
    includeTrackLine:
      type: boolean
      description: Whether to include track line at beginning of BED file
      default: true
    trackName:
      type: string
      description: Name for the track line
      default: "Exported Features"
    trackDescription:
      type: string
      description: Description for the track line
      default: "Features exported from genome browser"
    trackColor:
      type: string
      description: Color for the track in RGB format
      pattern: "^\\d{1,3},\\d{1,3},\\d{1,3}$"
      examples:
        - "255,0,0"
        - "0,128,0"
        - "0,0,255"
      default: "0,0,0"
    strand:
      type: string
      description: Strand to export features from
      enum:
        - "both"
        - "plus"
        - "minus"
      default: "both"
    minLength:
      type: number
      description: Minimum feature length to include
      default: 1
      minimum: 1
    maxLength:
      type: number
      description: Maximum feature length to include
      minimum: 1
    scoreMethod:
      type: string
      description: How to calculate BED score field
      enum:
        - "length"
        - "default"
        - "random"
        - "zero"
      default: "default"
    sortBy:
      type: string
      description: How to sort features in output
      enum:
        - "position"
        - "name"
        - "score"
        - "none"
      default: "position"
    includePartial:
      type: boolean
      description: Whether to include partial features
      default: true
    overwrite:
      type: boolean
      description: Whether to overwrite existing file
      default: false
    clientId:
      type: string
      description: Browser client ID for multi-window support
      default: "default"
  required:
    - filePath

# High-quality examples for few-shot learning
sample_usages:
  - user_query: "Export all features as BED6 to /data/features.bed"
    tool_call: "export_bed_format(filePath='/data/features.bed', bedFormat='bed6')"
    thought: "User wants to export all features in standard BED6 format"
    expected_result: "All features exported to BED6 file with track line"

  - user_query: "Export gene features from chromosome chr1 with custom track"
    tool_call: "export_bed_format(filePath='/output/chr1_genes.bed', chromosome='chr1', featureTypes=['gene'], trackName='Chr1 Genes', trackColor='255,0,0')"
    thought: "User wants to export genes from specific chromosome with custom track styling"
    expected_result: "Gene features from chr1 exported with custom red track"

  - user_query: "Export features from region 10000-50000 as BED12"
    tool_call: "export_bed_format(filePath='/data/region.bed', startPosition=10000, endPosition=50000, bedFormat='bed12')"
    thought: "User wants to export features from specific region in detailed BED12 format"
    expected_result: "Regional features exported in BED12 format with full details"

  - user_query: "Export specific genes sorted by name without track line"
    tool_call: "export_bed_format(filePath='/genes/selected.bed', geneNames=['lacZ', 'recA'], includeTrackLine=false, sortBy='name')"
    thought: "User wants to export specific genes without track line, sorted by name"
    expected_result: "Selected genes exported in BED format sorted by name"

  - user_query: "Export large features (>1000bp) from plus strand with length-based scores"
    tool_call: "export_bed_format(filePath='/data/large_plus.bed', minLength=1000, strand='plus', scoreMethod='length')"
    thought: "User wants to export filtered features with scores based on feature length"
    expected_result: "Large plus-strand features exported with length-based BED scores"

# Tool relationships and dependencies
relationships:
  depends_on: ["load_annotation_file"]
  conflicts_with: []
  enhances: []
  alternatives: ["export_gff_annotations", "export_genbank_format"]
  prerequisites: ["load_annotation_file"]
  follow_up: []

# Performance and usage statistics
metadata:
  usage_count: 0
  success_rate: 0.0
  avg_execution_time: 0
  last_used: null
  tags: ["file", "export", "bed", "annotations", "features", "track"]
  complexity: "moderate"
  usage_pattern: "common"

# Error handling
error_handling:
  no_annotations: "Returns error if no annotation data is loaded"
  no_features_found: "Returns error if no features found matching criteria"
  invalid_path: "Returns error if file path is invalid or not writable"
  invalid_region: "Returns error if start/end positions are invalid"
  chromosome_not_found: "Returns error if specified chromosome does not exist"
  feature_type_not_found: "Returns warning if specified feature types are not found"
  gene_not_found: "Returns warning if specified genes are not found"
  invalid_bed_format: "Returns error if specified BED format is not supported"
  invalid_color: "Returns error if track color format is invalid"
  permission_denied: "Returns error if cannot write to specified location"
  file_exists: "Returns error if file exists and overwrite is false"
  disk_space: "Returns error if insufficient disk space for export"

# Return value specification
returns:
  success: "boolean - Whether export was successful"
  file_path: "string - Path of the exported BED file"
  bed_format: "string - BED format version used"
  features_exported: "number - Number of features exported"
  feature_types: "array - Types of features exported"
  genes_exported: "number - Number of unique genes exported"
  chromosomes: "array - List of chromosomes with exported features"
  strand_distribution: "object - Distribution of features by strand"
  length_stats: "object - Statistics about feature lengths"
  track_info: "object - Track line information if included"
  file_size: "number - Size of exported file in bytes"
  export_time: "number - Time taken to export in milliseconds"
  filter_results: "object - Results of applied filters"
  sort_method: "string - Sorting method applied to features"
  region_info: "object - Information about exported region if applicable"
  error_message: "string - Error message if export failed"