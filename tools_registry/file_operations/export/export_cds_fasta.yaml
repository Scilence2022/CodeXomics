name: export_cds_fasta
version: 1.0.0
description: Export coding sequences (CDS) in FASTA format to specified file path
category: file_operations
keywords:
  - export
  - cds
  - fasta
  - coding
  - sequences
priority: 1
execution:
  type: client
  timeout: 60000
  retries: 2
  requires_auth: false
  requires_data: true
  requires_network: false
parameters:
  type: object
  properties:
    filePath:
      type: string
      description: Absolute path where to save the CDS FASTA file
      examples:
        - "/path/to/export/cds.fasta"
        - "/data/coding_sequences.fa"
        - "/output/genes.fasta"
    chromosome:
      type: string
      description: Specific chromosome to export CDS from (optional)
      examples:
        - "chr1"
        - "chromosome1"
        - "NC_000913"
    startPosition:
      type: number
      description: Start position for CDS export (1-based, optional)
      minimum: 1
    endPosition:
      type: number
      description: End position for CDS export (1-based, optional)
      minimum: 1
    geneNames:
      type: array
      description: Specific gene names to export (optional)
      items:
        type: string
      examples:
        - ["lacZ", "recA", "dnaA"]
        - ["TP53", "BRCA1"]
    includePartial:
      type: boolean
      description: Whether to include partial CDS sequences
      default: true
    includePseudogenes:
      type: boolean
      description: Whether to include pseudogene CDS
      default: false
    minLength:
      type: number
      description: Minimum CDS length to include (in nucleotides)
      default: 1
      minimum: 1
    maxLength:
      type: number
      description: Maximum CDS length to include (in nucleotides)
      minimum: 1
    strand:
      type: string
      description: Strand to export CDS from
      enum:
        - "both"
        - "plus"
        - "minus"
      default: "both"
    lineLength:
      type: number
      description: Number of characters per line in FASTA output
      default: 80
      minimum: 1
      maximum: 1000
    includeGeneInfo:
      type: boolean
      description: Whether to include gene information in FASTA headers
      default: true
    upperCase:
      type: boolean
      description: Whether to output sequences in uppercase
      default: false
    overwrite:
      type: boolean
      description: Whether to overwrite existing file
      default: false
    clientId:
      type: string
      description: Browser client ID for multi-window support
      default: "default"
  required:
    - filePath

# High-quality examples for few-shot learning
sample_usages:
  - user_query: "Export all CDS sequences to /data/cds.fasta"
    tool_call: "export_cds_fasta(filePath='/data/cds.fasta')"
    thought: "User wants to export all coding sequences in FASTA format"
    expected_result: "All CDS sequences exported to FASTA file"

  - user_query: "Export CDS for specific genes lacZ and recA"
    tool_call: "export_cds_fasta(filePath='/output/selected_genes.fasta', geneNames=['lacZ', 'recA'])"
    thought: "User wants to export CDS for specific genes only"
    expected_result: "CDS sequences for lacZ and recA exported"

  - user_query: "Export CDS from chromosome chr1 region 10000-50000"
    tool_call: "export_cds_fasta(filePath='/data/chr1_cds.fasta', chromosome='chr1', startPosition=10000, endPosition=50000)"
    thought: "User wants to export CDS from specific chromosomal region"
    expected_result: "CDS sequences from specified region exported"

  - user_query: "Export long CDS sequences (>300bp) from plus strand only"
    tool_call: "export_cds_fasta(filePath='/data/long_cds_plus.fasta', minLength=300, strand='plus', upperCase=true)"
    thought: "User wants to export filtered CDS sequences from plus strand"
    expected_result: "Long CDS sequences from plus strand exported in uppercase"

  - user_query: "Export CDS without pseudogenes and with gene info"
    tool_call: "export_cds_fasta(filePath='/clean/cds_clean.fasta', includePseudogenes=false, includeGeneInfo=true)"
    thought: "User wants clean CDS export without pseudogenes but with gene information"
    expected_result: "Clean CDS sequences exported with gene information"

# Tool relationships and dependencies
relationships:
  depends_on: ["load_genome_file", "load_annotation_file"]
  conflicts_with: []
  enhances: []
  alternatives: ["export_protein_fasta", "export_fasta_sequence"]
  prerequisites: ["load_genome_file", "load_annotation_file"]
  follow_up: ["export_protein_fasta"]

# Performance and usage statistics
metadata:
  usage_count: 0
  success_rate: 0.0
  avg_execution_time: 0
  last_used: null
  tags: ["file", "export", "cds", "fasta", "coding", "genes"]
  complexity: "moderate"
  usage_pattern: "common"

# Error handling
error_handling:
  no_genome_loaded: "Returns error if no genome data is loaded"
  no_annotations: "Returns error if no annotation data is loaded"
  no_cds_found: "Returns error if no CDS features found in specified region/genes"
  invalid_path: "Returns error if file path is invalid or not writable"
  invalid_region: "Returns error if start/end positions are invalid"
  chromosome_not_found: "Returns error if specified chromosome does not exist"
  gene_not_found: "Returns warning if specified genes are not found"
  permission_denied: "Returns error if cannot write to specified location"
  file_exists: "Returns error if file exists and overwrite is false"
  disk_space: "Returns error if insufficient disk space for export"

# Return value specification
returns:
  success: "boolean - Whether export was successful"
  file_path: "string - Path of the exported CDS FASTA file"
  cds_exported: "number - Number of CDS sequences exported"
  genes_exported: "number - Number of unique genes exported"
  total_length: "number - Total length of exported CDS sequences"
  chromosomes: "array - List of chromosomes with exported CDS"
  strand_distribution: "object - Distribution of CDS by strand"
  length_stats: "object - Statistics about CDS lengths"
  file_size: "number - Size of exported file in bytes"
  export_time: "number - Time taken to export in milliseconds"
  filter_results: "object - Results of applied filters"
  region_info: "object - Information about exported region if applicable"
  error_message: "string - Error message if export failed"