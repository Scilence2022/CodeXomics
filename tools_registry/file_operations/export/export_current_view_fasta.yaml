name: export_current_view_fasta
version: 1.0.0
description: Export current visible region as FASTA sequence to specified file path
category: file_operations
keywords:
  - export
  - current
  - view
  - fasta
  - region
priority: 1
execution:
  type: client
  timeout: 30000
  retries: 2
  requires_auth: false
  requires_data: true
  requires_network: false
parameters:
  type: object
  properties:
    filePath:
      type: string
      description: Absolute path where to save the current view FASTA file
      examples:
        - "/path/to/export/current_view.fasta"
        - "/data/visible_region.fa"
        - "/output/current_sequence.fasta"
    includeAnnotations:
      type: boolean
      description: Whether to include feature annotations as comments
      default: false
    lineLength:
      type: number
      description: Number of characters per line in FASTA output
      default: 80
      minimum: 1
      maximum: 1000
    includeCoordinates:
      type: boolean
      description: Whether to include coordinates in the FASTA header
      default: true
    customHeader:
      type: string
      description: Custom header for the FASTA sequence (optional)
      examples:
        - "Current View Region"
        - "Selected Genomic Sequence"
        - "Visible Area Export"
    upperCase:
      type: boolean
      description: Whether to output sequence in uppercase
      default: false
    removeGaps:
      type: boolean
      description: Whether to remove gap characters (N, -, etc.)
      default: false
    includeReverseComplement:
      type: boolean
      description: Whether to include reverse complement sequence
      default: false
    addTimestamp:
      type: boolean
      description: Whether to add timestamp to filename
      default: false
    compressionFormat:
      type: string
      description: Compression format for output file
      enum:
        - "none"
        - "gzip"
        - "zip"
      default: "none"
    overwrite:
      type: boolean
      description: Whether to overwrite existing file
      default: false
    clientId:
      type: string
      description: Browser client ID for multi-window support
      default: "default"
  required:
    - filePath

# High-quality examples for few-shot learning
sample_usages:
  - user_query: "Export current view to /data/current_view.fasta"
    tool_call: "export_current_view_fasta(filePath='/data/current_view.fasta')"
    thought: "User wants to export the currently visible genomic region"
    expected_result: "Current view exported as FASTA with coordinates in header"

  - user_query: "Export current view with annotations and custom header"
    tool_call: "export_current_view_fasta(filePath='/output/region_with_annotations.fasta', includeAnnotations=true, customHeader='Selected Region')"
    thought: "User wants to export current view with feature annotations included"
    expected_result: "Current view exported with annotations and custom header"

  - user_query: "Export current view in uppercase with reverse complement"
    tool_call: "export_current_view_fasta(filePath='/data/both_strands.fasta', upperCase=true, includeReverseComplement=true)"
    thought: "User wants both forward and reverse complement sequences in uppercase"
    expected_result: "Current view exported with both strands in uppercase"

  - user_query: "Export current view with timestamp and compression"
    tool_call: "export_current_view_fasta(filePath='/data/view.fasta', addTimestamp=true, compressionFormat='gzip')"
    thought: "User wants timestamped export with gzip compression"
    expected_result: "Current view exported with timestamp in filename and gzip compression"

  - user_query: "Export clean sequence without gaps or coordinates"
    tool_call: "export_current_view_fasta(filePath='/clean/sequence.fasta', removeGaps=true, includeCoordinates=false)"
    thought: "User wants clean sequence export without gaps or coordinate information"
    expected_result: "Clean sequence exported without gaps or coordinates"

# Tool relationships and dependencies
relationships:
  depends_on: ["load_genome_file"]
  conflicts_with: []
  enhances: []
  alternatives: ["export_fasta_sequence", "export_genbank_format"]
  prerequisites: ["load_genome_file"]
  follow_up: []

# Performance and usage statistics
metadata:
  usage_count: 0
  success_rate: 0.0
  avg_execution_time: 0
  last_used: null
  tags: ["file", "export", "current", "view", "fasta", "region"]
  complexity: "simple"
  usage_pattern: "common"

# Error handling
error_handling:
  no_genome_loaded: "Returns error if no genome data is loaded"
  no_current_view: "Returns error if no current view/region is defined"
  invalid_path: "Returns error if file path is invalid or not writable"
  empty_region: "Returns error if current view region is empty"
  permission_denied: "Returns error if cannot write to specified location"
  file_exists: "Returns error if file exists and overwrite is false"
  compression_error: "Returns error if compression fails"
  disk_space: "Returns error if insufficient disk space for export"
  invalid_coordinates: "Returns error if current view coordinates are invalid"

# Return value specification
returns:
  success: "boolean - Whether export was successful"
  file_path: "string - Path of the exported FASTA file"
  actual_filename: "string - Actual filename used (with timestamp if added)"
  chromosome: "string - Chromosome of exported region"
  start_position: "number - Start position of exported region"
  end_position: "number - End position of exported region"
  sequence_length: "number - Length of exported sequence"
  includes_reverse: "boolean - Whether reverse complement was included"
  annotations_count: "number - Number of annotations included (if any)"
  file_size: "number - Size of exported file in bytes"
  compression_used: "string - Compression format used"
  export_time: "number - Time taken to export in milliseconds"
  format_options: "object - Format options applied during export"
  view_info: "object - Information about current view exported"
  error_message: "string - Error message if export failed"