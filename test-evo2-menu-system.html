<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evo2 Menu System Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f8fafc;
        }
        
        .test-container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .test-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8fafc;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .test-button {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s;
            margin: 5px;
        }
        
        .test-button:hover {
            background: #5a67d8;
            transform: translateY(-1px);
        }
        
        .test-button.secondary {
            background: #6b7280;
        }
        
        .test-button.secondary:hover {
            background: #4b5563;
        }
        
        .test-results {
            background: #1f2937;
            color: #f3f4f6;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
            margin-top: 15px;
        }
        
        .menu-info {
            background: #eff6ff;
            border: 1px solid #bfdbfe;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .menu-info h4 {
            color: #1d4ed8;
            margin: 0 0 10px 0;
        }
        
        .shortcut-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        
        .shortcut-table th,
        .shortcut-table td {
            border: 1px solid #e5e7eb;
            padding: 8px 12px;
            text-align: left;
        }
        
        .shortcut-table th {
            background: #f9fafb;
            font-weight: 600;
        }
        
        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-indicator.success { background: #10b981; }
        .status-indicator.error { background: #ef4444; }
        .status-indicator.warning { background: #f59e0b; }
        .status-indicator.info { background: #3b82f6; }
    </style>
</head>
<body>
    <div class="test-header">
        <h1>üß¨ Evo2 Designer Menu System Test</h1>
        <p>Comprehensive testing for the specialized Evo2 menu system</p>
    </div>

    <div class="test-container">
        <div class="menu-info">
            <h4>üìã Menu System Overview</h4>
            <p>The Evo2 Designer uses a specialized menu system separate from the main Genome AI Studio window. 
               This includes custom menus for File, Edit, Generation, Tools, View, Window, and Help operations.</p>
        </div>

        <!-- File Menu Tests -->
        <div class="test-section">
            <h3>üìÅ File Menu Tests</h3>
            <div class="test-grid">
                <div>
                    <h4>Project Operations</h4>
                    <button class="test-button" onclick="testMenuAction('new-project')">New Project (Cmd+N)</button>
                    <button class="test-button" onclick="testFileOpen()">Open Sequence File (Cmd+O)</button>
                    <button class="test-button" onclick="testMenuAction('import-clipboard')">Import from Clipboard</button>
                </div>
                <div>
                    <h4>Save & Export</h4>
                    <button class="test-button" onclick="testMenuAction('save-design')">Save Design (Cmd+S)</button>
                    <button class="test-button" onclick="testMenuAction('save-as')">Save As (Cmd+Shift+S)</button>
                    <button class="test-button" onclick="testMenuAction('export-fasta')">Export as FASTA</button>
                    <button class="test-button" onclick="testMenuAction('export-json')">Export as JSON</button>
                </div>
            </div>
        </div>

        <!-- Edit Menu Tests -->
        <div class="test-section">
            <h3>‚úèÔ∏è Edit Menu Tests</h3>
            <div class="test-grid">
                <div>
                    <h4>Undo/Redo</h4>
                    <button class="test-button" onclick="testMenuAction('undo')">Undo (Cmd+Z)</button>
                    <button class="test-button" onclick="testMenuAction('redo')">Redo (Cmd+Y)</button>
                </div>
                <div>
                    <h4>Clipboard Operations</h4>
                    <button class="test-button" onclick="testMenuAction('copy')">Copy (Cmd+C)</button>
                    <button class="test-button" onclick="testMenuAction('paste')">Paste (Cmd+V)</button>
                    <button class="test-button" onclick="testMenuAction('cut')">Cut (Cmd+X)</button>
                    <button class="test-button" onclick="testMenuAction('select-all')">Select All (Cmd+A)</button>
                </div>
                <div>
                    <h4>Sequence Operations</h4>
                    <button class="test-button" onclick="testMenuAction('copy-sequence')">Copy Sequence</button>
                    <button class="test-button" onclick="testMenuAction('paste-sequence')">Paste Sequence</button>
                    <button class="test-button" onclick="testMenuAction('clear-input')">Clear Input</button>
                </div>
            </div>
        </div>

        <!-- Generation Menu Tests -->
        <div class="test-section">
            <h3>üß¨ Generation Menu Tests</h3>
            <div class="test-grid">
                <div>
                    <h4>Core Functions</h4>
                    <button class="test-button" onclick="testMenuAction('generate-sequence')">Generate DNA Sequence (Cmd+G)</button>
                    <button class="test-button" onclick="testMenuAction('predict-function')">Predict Function (Cmd+P)</button>
                    <button class="test-button" onclick="testMenuAction('design-crispr')">Design CRISPR (Cmd+R)</button>
                </div>
                <div>
                    <h4>Advanced Operations</h4>
                    <button class="test-button" onclick="testMenuAction('optimize-sequence')">Optimize Sequence</button>
                    <button class="test-button" onclick="testMenuAction('analyze-essentiality')">Analyze Essentiality</button>
                    <button class="test-button secondary" onclick="testMenuAction('stop-generation')">Stop Generation</button>
                </div>
            </div>
        </div>

        <!-- Tools Menu Tests -->
        <div class="test-section">
            <h3>üîß Tools Menu Tests</h3>
            <div class="test-grid">
                <div>
                    <h4>Configuration</h4>
                    <button class="test-button" onclick="testMenuAction('configure-api')">API Configuration</button>
                    <button class="test-button" onclick="testMenuAction('test-api-connection')">Test API Connection</button>
                </div>
                <div>
                    <h4>History Management</h4>
                    <button class="test-button" onclick="testMenuAction('show-history')">Show History (Cmd+H)</button>
                    <button class="test-button secondary" onclick="testMenuAction('clear-history')">Clear History</button>
                </div>
            </div>
        </div>

        <!-- View Menu Tests -->
        <div class="test-section">
            <h3>üëÅÔ∏è View Menu Tests</h3>
            <div class="test-grid">
                <div>
                    <h4>Mode Switching</h4>
                    <button class="test-button" onclick="testModeSwitch('generate')">Sequence Generation (1)</button>
                    <button class="test-button" onclick="testModeSwitch('predict')">Function Prediction (2)</button>
                    <button class="test-button" onclick="testModeSwitch('crispr')">CRISPR Design (3)</button>
                    <button class="test-button" onclick="testModeSwitch('optimize')">Optimization (4)</button>
                    <button class="test-button" onclick="testModeSwitch('essentiality')">Essentiality (5)</button>
                </div>
                <div>
                    <h4>Panel Toggles</h4>
                    <button class="test-button" onclick="testMenuAction('toggle-sidebar')">Toggle Sidebar</button>
                    <button class="test-button" onclick="testMenuAction('toggle-results-panel')">Toggle Results Panel</button>
                    <button class="test-button" onclick="testMenuAction('toggle-history-panel')">Toggle History Panel</button>
                </div>
            </div>
        </div>

        <!-- Help Menu Tests -->
        <div class="test-section">
            <h3>‚ùì Help Menu Tests</h3>
            <div class="test-grid">
                <div>
                    <h4>Documentation</h4>
                    <button class="test-button" onclick="testMenuAction('show-user-guide')">User Guide</button>
                    <button class="test-button" onclick="testMenuAction('show-shortcuts')">Keyboard Shortcuts (Cmd+?)</button>
                    <button class="test-button" onclick="testMenuAction('about')">About Evo2 Designer</button>
                </div>
                <div>
                    <h4>External Links</h4>
                    <button class="test-button" onclick="openNvidiaDoc()">NVIDIA Documentation</button>
                    <button class="test-button" onclick="openApiReference()">API Reference</button>
                </div>
            </div>
        </div>

        <!-- Keyboard Shortcuts Reference -->
        <div class="test-section">
            <h3>‚å®Ô∏è Keyboard Shortcuts Reference</h3>
            <table class="shortcut-table">
                <thead>
                    <tr>
                        <th>Action</th>
                        <th>Shortcut</th>
                        <th>Menu</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>New Project</td><td>Cmd/Ctrl+N</td><td>File</td></tr>
                    <tr><td>Open File</td><td>Cmd/Ctrl+O</td><td>File</td></tr>
                    <tr><td>Save Design</td><td>Cmd/Ctrl+S</td><td>File</td></tr>
                    <tr><td>Copy</td><td>Cmd/Ctrl+C</td><td>Edit</td></tr>
                    <tr><td>Paste</td><td>Cmd/Ctrl+V</td><td>Edit</td></tr>
                    <tr><td>Generate Sequence</td><td>Cmd/Ctrl+G</td><td>Generation</td></tr>
                    <tr><td>Predict Function</td><td>Cmd/Ctrl+P</td><td>Generation</td></tr>
                    <tr><td>Design CRISPR</td><td>Cmd/Ctrl+R</td><td>Generation</td></tr>
                    <tr><td>API Configuration</td><td>Cmd/Ctrl+Alt+C</td><td>Tools</td></tr>
                    <tr><td>Show History</td><td>Cmd/Ctrl+H</td><td>Tools</td></tr>
                    <tr><td>Mode Switch 1-5</td><td>1, 2, 3, 4, 5</td><td>View</td></tr>
                    <tr><td>Keyboard Shortcuts</td><td>Cmd/Ctrl+?</td><td>Help</td></tr>
                </tbody>
            </table>
        </div>

        <!-- Test Results -->
        <div class="test-section">
            <h3>üìä Test Results</h3>
            <div id="testResults" class="test-results">Ready to test menu system...</div>
        </div>

        <!-- Integration Test -->
        <div class="test-section">
            <h3>üîó Integration Test</h3>
            <p>Open the actual Evo2 Designer to test the menu integration:</p>
            <button class="test-button" onclick="openEvo2Designer()" style="background: #059669; font-size: 16px; padding: 15px 30px;">
                üöÄ Open Evo2 Designer
            </button>
        </div>
    </div>

    <script>
        let testResults = [];

        function logTest(message, status = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const statusIcon = status === 'success' ? '‚úÖ' : status === 'error' ? '‚ùå' : status === 'warning' ? '‚ö†Ô∏è' : '‚ÑπÔ∏è';
            const entry = `[${timestamp}] ${statusIcon} ${message}`;
            
            testResults.push(entry);
            updateTestResults();
        }

        function updateTestResults() {
            const resultsDiv = document.getElementById('testResults');
            resultsDiv.innerHTML = testResults.slice(-20).join('\n');
            resultsDiv.scrollTop = resultsDiv.scrollHeight;
        }

        function testMenuAction(action) {
            logTest(`Testing menu action: ${action}`, 'info');
            
            // Simulate the menu action
            try {
                // In a real test, this would trigger the actual menu action
                // For demo purposes, we'll simulate the response
                setTimeout(() => {
                    if (action.includes('clear') || action.includes('stop')) {
                        logTest(`Menu action '${action}' executed successfully (destructive action)`, 'warning');
                    } else if (action.includes('export') || action.includes('save')) {
                        logTest(`Menu action '${action}' executed successfully (file operation)`, 'success');
                    } else {
                        logTest(`Menu action '${action}' executed successfully`, 'success');
                    }
                }, 100);
            } catch (error) {
                logTest(`Menu action '${action}' failed: ${error.message}`, 'error');
            }
        }

        function testModeSwitch(mode) {
            logTest(`Testing mode switch to: ${mode}`, 'info');
            
            setTimeout(() => {
                logTest(`Successfully switched to ${mode} mode`, 'success');
            }, 50);
        }

        function testFileOpen() {
            logTest('Testing file open dialog...', 'info');
            
            // Simulate file dialog
            setTimeout(() => {
                logTest('File open dialog displayed successfully', 'success');
                logTest('Simulated file: sample_sequence.fasta loaded', 'success');
            }, 200);
        }

        function openNvidiaDoc() {
            logTest('Opening NVIDIA Evo2 documentation...', 'info');
            window.open('https://docs.api.nvidia.com/nim/reference/arc-evo2-40b', '_blank');
            logTest('External documentation opened', 'success');
        }

        function openApiReference() {
            logTest('Opening API reference...', 'info');
            window.open('https://build.nvidia.com/arc/evo2-40b', '_blank');
            logTest('API reference opened', 'success');
        }

        function openEvo2Designer() {
            logTest('Attempting to open Evo2 Designer...', 'info');
            
            if (typeof require !== 'undefined') {
                try {
                    const { ipcRenderer } = require('electron');
                    ipcRenderer.send('open-evo2-window');
                    logTest('Evo2 Designer window requested via IPC', 'success');
                } catch (error) {
                    logTest(`Failed to open Evo2 Designer: ${error.message}`, 'error');
                }
            } else {
                logTest('Running in browser mode - cannot open Evo2 Designer', 'warning');
                // Fallback: open in new tab
                window.open('../src/bioinformatics-tools/evo2-designer.html', '_blank');
                logTest('Opened Evo2 Designer in new tab', 'success');
            }
        }

        // Run initial tests
        document.addEventListener('DOMContentLoaded', function() {
            logTest('Menu System Test Suite initialized', 'success');
            logTest('Ready to test Evo2 Designer menu functionality', 'info');
            
            // Test basic functionality
            setTimeout(() => {
                logTest('Testing notification system...', 'info');
                testMenuAction('copy');
                testMenuAction('generate-sequence');
                testModeSwitch('predict');
            }, 1000);
        });

        // Keyboard shortcut testing
        document.addEventListener('keydown', function(e) {
            const cmd = e.metaKey || e.ctrlKey;
            const shift = e.shiftKey;
            const alt = e.altKey;
            
            if (cmd && !shift && !alt) {
                switch (e.key) {
                    case 'n':
                        e.preventDefault();
                        testMenuAction('new-project');
                        break;
                    case 'o':
                        e.preventDefault();
                        testFileOpen();
                        break;
                    case 's':
                        e.preventDefault();
                        testMenuAction('save-design');
                        break;
                    case 'g':
                        e.preventDefault();
                        testMenuAction('generate-sequence');
                        break;
                    case 'p':
                        e.preventDefault();
                        testMenuAction('predict-function');
                        break;
                    case 'r':
                        e.preventDefault();
                        testMenuAction('design-crispr');
                        break;
                    case 'h':
                        e.preventDefault();
                        testMenuAction('show-history');
                        break;
                }
            }
            
            // Number keys for mode switching
            if (!cmd && !shift && !alt && /[1-5]/.test(e.key)) {
                const modes = ['generate', 'predict', 'crispr', 'optimize', 'essentiality'];
                const mode = modes[parseInt(e.key) - 1];
                if (mode) {
                    e.preventDefault();
                    testModeSwitch(mode);
                }
            }
        });
    </script>
</body>
</html> 