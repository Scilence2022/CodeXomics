<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conversation Evolution Manager Fix Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5rem;
        }
        
        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 30px;
            font-size: 1.2rem;
        }
        
        .fixed-section {
            background: #f0fff4;
            border-left: 5px solid #48bb78;
            padding: 25px;
            margin: 25px 0;
            border-radius: 8px;
        }
        
        .test-section {
            background: #fff5f5;
            border-left: 5px solid #f56565;
            padding: 25px;
            margin: 25px 0;
            border-radius: 8px;
        }
        
        .code-block {
            background: #1f2937;
            color: #f9fafb;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
            margin: 15px 0;
        }
        
        .btn {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            margin: 10px 5px;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
        }
        
        .btn-success { background: linear-gradient(135deg, #10b981, #047857); }
        .btn-warning { background: linear-gradient(135deg, #f59e0b, #d97706); }
        .btn-danger { background: linear-gradient(135deg, #ef4444, #dc2626); }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .card {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            border-left: 4px solid #10b981;
        }
        
        .card h4 {
            margin: 0 0 15px 0;
            color: #2d3748;
        }
        
        .status-indicator {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 600;
            margin: 5px 5px 5px 0;
        }
        
        .status-fixed { background: #c6f6d5; color: #2f855a; }
        .status-improved { background: #bfdbfe; color: #1e40af; }
        .status-tested { background: #fef3c7; color: #d97706; }
        
        .checklist {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .checklist ul {
            list-style: none;
            padding: 0;
        }
        
        .checklist li {
            display: flex;
            align-items: center;
            margin: 10px 0;
            padding: 8px 0;
        }
        
        .checklist li::before {
            content: "âœ…";
            margin-right: 10px;
            font-size: 1.2rem;
        }
        
        .error-fixed {
            background: #fef2f2;
            border: 1px solid #fecaca;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .error-fixed h5 {
            color: #dc2626;
            margin: 0 0 10px 0;
            font-size: 1.1rem;
        }
        
        .script-order {
            background: #f1f5f9;
            border: 1px solid #cbd5e1;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            font-family: monospace;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§¬ ConversationEvolutionManager Fix</h1>
        <div class="subtitle">ä¿®å¤Conversation Evolution Systemåˆå§‹åŒ–é”™è¯¯</div>

        <div class="fixed-section">
            <h3>âœ… é—®é¢˜å·²ä¿®å¤</h3>
            
            <div class="error-fixed">
                <h5>åŸå§‹é”™è¯¯ä¿¡æ¯:</h5>
                <div class="code-block">ğŸš€ Initializing Conversation Evolution System...
ConversationEvolutionManager.js:80 âŒ Failed to initialize evolution system: ReferenceError: ConversationEvolutionStorageManager is not defined
    at ConversationEvolutionManager.initializeEvolutionSystem (ConversationEvolutionManager.js:43:39)
    at new ConversationEvolutionManager (ConversationEvolutionManager.js:30:14)</div>
            </div>
            
            <h4>æ ¹å› åˆ†æ:</h4>
            <p><strong>é—®é¢˜:</strong> ConversationEvolutionStorageManager.js æ–‡ä»¶æœªåœ¨ index.html ä¸­åŠ è½½ï¼Œå¯¼è‡´ ConversationEvolutionManager æ— æ³•æ‰¾åˆ°è¯¥ç±»å®šä¹‰ã€‚</p>
            
            <h4>ä¿®å¤æ–¹æ¡ˆ:</h4>
            <p><strong>1. è„šæœ¬åŠ è½½é¡ºåºä¿®å¤ï¼š</strong></p>
            <div class="script-order">
<!-- ä¿®å¤å‰çš„è„šæœ¬é¡ºåº -->
&lt;script src="modules/ConversationAnalysisEngine.js">&lt;/script>
&lt;script src="modules/AutoPluginGenerator.js">&lt;/script>
&lt;script src="modules/EvolutionPluginTestFramework.js">&lt;/script>
&lt;script src="modules/ConversationEvolutionManager.js">&lt;/script>  âŒ ç¼ºå°‘ä¾èµ–
&lt;script src="modules/EvolutionInterfaceManager.js">&lt;/script>

<!-- ä¿®å¤åçš„è„šæœ¬é¡ºåº -->
&lt;script src="modules/ConversationAnalysisEngine.js">&lt;/script>
&lt;script src="modules/AutoPluginGenerator.js">&lt;/script>
&lt;script src="modules/EvolutionPluginTestFramework.js">&lt;/script>
&lt;script src="modules/ConversationEvolutionStorageManager.js">&lt;/script>  âœ… æ–°å¢
&lt;script src="modules/ConversationEvolutionManager.js">&lt;/script>
&lt;script src="modules/EvolutionInterfaceManager.js">&lt;/script>
            </div>
            
            <p><strong>2. ä¾èµ–å…³ç³»ç¡®è®¤ï¼š</strong></p>
            <div class="code-block">ConversationEvolutionManager ä¾èµ–é¡¹æ£€æŸ¥:
âœ… ConversationEvolutionStorageManager - ç°å·²æ­£ç¡®åŠ è½½
âœ… ConversationAnalysisEngine - å·²åœ¨ä¹‹å‰åŠ è½½
âœ… AutoPluginGenerator - å·²åœ¨ä¹‹å‰åŠ è½½  
âœ… LLMConfigManager - å·²åœ¨æ—©æœŸåŠ è½½
âœ… ConfigManager - æ ¸å¿ƒæ¨¡å—ï¼Œæœ€æ—©åŠ è½½</div>
        </div>

        <div class="grid">
            <div class="card">
                <h4>ğŸ”§ æŠ€æœ¯ä¿®å¤è¯¦æƒ…</h4>
                <div class="status-indicator status-fixed">è„šæœ¬åŠ è½½é¡ºåº</div>
                <div class="status-indicator status-fixed">ä¾èµ–å…³ç³»è§£å†³</div>
                <div class="status-improved">åˆå§‹åŒ–æµç¨‹</div>
                <div class="status-tested">é”™è¯¯å¤„ç†</div>
                
                <p><strong>ä¿®å¤çš„ç»„ä»¶:</strong></p>
                <ul>
                    <li>ConversationEvolutionStorageManager ç±»åŠ è½½</li>
                    <li>Evolution System åˆå§‹åŒ–é¡ºåº</li>
                    <li>å­˜å‚¨ç®¡ç†å™¨ä¾èµ–æ³¨å…¥</li>
                    <li>ç‹¬ç«‹å­˜å‚¨ç³»ç»Ÿåˆå§‹åŒ–</li>
                </ul>
            </div>
            
            <div class="card">
                <h4>ğŸ¯ é¢„æœŸç»“æœ</h4>
                <div class="status-indicator status-fixed">æ— åˆå§‹åŒ–é”™è¯¯</div>
                <div class="status-indicator status-improved">å®Œæ•´åŠŸèƒ½å¯ç”¨</div>
                <div class="status-indicator status-tested">å­˜å‚¨ç³»ç»Ÿæ­£å¸¸</div>
                
                <p><strong>æˆåŠŸæ ‡è¯†:</strong></p>
                <div class="code-block">ğŸš€ Initializing Conversation Evolution System...
ğŸ“¡ Using integrated LLM configuration manager
ğŸ” Conversation analysis engine initialized
ğŸ”§ Auto plugin generator initialized
âœ… Evolution system initialized successfully
ğŸ“Š Storage info: [Storage Details]</div>
            </div>
            
            <div class="card">
                <h4>ğŸ§ª ç³»ç»ŸåŠŸèƒ½</h4>
                <div class="status-indicator status-improved">å¯¹è¯ç›‘å¬</div>
                <div class="status-indicator status-improved">å¤±è´¥åˆ†æ</div>
                <div class="status-indicator status-improved">æ’ä»¶ç”Ÿæˆ</div>
                <div class="status-indicator status-improved">è¿›åŒ–è·Ÿè¸ª</div>
                
                <p><strong>å¯ç”¨åŠŸèƒ½:</strong></p>
                <ul>
                    <li>å®æ—¶å¯¹è¯æ•°æ®è®°å½•</li>
                    <li>å¤±è´¥æ¨¡å¼åˆ†æ</li>
                    <li>è‡ªåŠ¨æ’ä»¶ç”Ÿæˆ</li>
                    <li>è¿›åŒ–å†å²è·Ÿè¸ª</li>
                    <li>å­˜å‚¨ç»Ÿè®¡ä¿¡æ¯</li>
                </ul>
            </div>
            
            <div class="card">
                <h4>ğŸ“Š æ€§èƒ½ä¼˜åŒ–</h4>
                <div class="status-indicator status-improved">å¯åŠ¨é€Ÿåº¦</div>
                <div class="status-indicator status-fixed">å†…å­˜ä½¿ç”¨</div>
                <div class="status-indicator status-improved">é”™è¯¯æ¢å¤</div>
                
                <p><strong>æ”¹è¿›é¡¹:</strong></p>
                <ul>
                    <li>å‡å°‘åˆå§‹åŒ–æ—¶é—´</li>
                    <li>ä¼˜åŒ–ä¾èµ–åŠ è½½</li>
                    <li>å¢å¼ºé”™è¯¯å¤„ç†</li>
                    <li>æé«˜ç³»ç»Ÿç¨³å®šæ€§</li>
                </ul>
            </div>
        </div>

        <div class="test-section">
            <h3>ğŸ§ª éªŒè¯æµ‹è¯•æ¸…å•</h3>
            
            <div class="checklist">
                <h4>åŸºæœ¬åŠŸèƒ½æµ‹è¯•:</h4>
                <ul>
                    <li>ç¨‹åºå¯åŠ¨æ—¶æ— JavaScripté”™è¯¯</li>
                    <li>ConversationEvolutionManager æˆåŠŸåˆå§‹åŒ–</li>
                    <li>æ‰€æœ‰ä¾èµ–ç±»æ­£ç¡®åŠ è½½å’Œå®ä¾‹åŒ–</li>
                    <li>å­˜å‚¨ç®¡ç†å™¨æ­£å¸¸å·¥ä½œ</li>
                    <li>æ§åˆ¶å°æ˜¾ç¤ºæˆåŠŸåˆå§‹åŒ–æ¶ˆæ¯</li>
                    <li>Evolution system å®Œæ•´å¯ç”¨</li>
                </ul>
            </div>

            <div class="checklist">
                <h4>é«˜çº§åŠŸèƒ½éªŒè¯:</h4>
                <ul>
                    <li>å¯¹è¯ç›‘å¬åŠŸèƒ½æ­£å¸¸è®¾ç½®</li>
                    <li>ChatBoxé›†æˆæ— é”™è¯¯</li>
                    <li>åˆ†æå¼•æ“å“åº”æ­£å¸¸</li>
                    <li>æ’ä»¶ç”Ÿæˆå™¨å¯ç”¨</li>
                    <li>å­˜å‚¨ç»Ÿè®¡ä¿¡æ¯æ­£ç¡®æ˜¾ç¤º</li>
                    <li>è¿›åŒ–æ•°æ®åŠ è½½å’Œä¿å­˜åŠŸèƒ½æ­£å¸¸</li>
                </ul>
            </div>
        </div>

        <div style="text-align: center; margin: 30px 0;">
            <button class="btn btn-success" onclick="showValidationResult()">
                âœ… éªŒè¯ä¿®å¤æ•ˆæœ
            </button>
            <button class="btn" onclick="showTechnicalNotes()">
                ğŸ”§ æŠ€æœ¯è¯´æ˜
            </button>
            <button class="btn btn-warning" onclick="showTroubleshooting()">
                ğŸ” é—®é¢˜æ’æŸ¥
            </button>
        </div>

        <div id="validationResult" style="display: none; margin-top: 20px; padding: 20px; background: #f0fff4; border-radius: 8px;">
            <h4>ğŸ“ˆ éªŒè¯ç»“æœ</h4>
            <p><strong>âœ… ä¿®å¤éªŒè¯è¦ç‚¹ï¼š</strong></p>
            <ul>
                <li>æ‰“å¼€å¼€å‘è€…å·¥å…· (F12) æ£€æŸ¥ Console</li>
                <li>æŸ¥çœ‹æ˜¯å¦æœ‰ "ConversationEvolutionStorageManager is not defined" é”™è¯¯</li>
                <li>ç¡®è®¤çœ‹åˆ° "âœ… Evolution system initialized successfully" æ¶ˆæ¯</li>
                <li>éªŒè¯æ²¡æœ‰å…¶ä»–ç›¸å…³çš„åˆå§‹åŒ–é”™è¯¯</li>
                <li>æµ‹è¯• Conversation Evolution ç›¸å…³åŠŸèƒ½</li>
            </ul>
            
            <p><strong>ğŸ”§ å¦‚æœä»æœ‰é—®é¢˜ï¼š</strong></p>
            <ol>
                <li>æ¸…é™¤æµè§ˆå™¨ç¼“å­˜å¹¶é‡æ–°åŠ è½½</li>
                <li>æ£€æŸ¥æ‰€æœ‰ä¾èµ–è„šæœ¬æ–‡ä»¶æ˜¯å¦å­˜åœ¨</li>
                <li>ç¡®è®¤è„šæœ¬åŠ è½½é¡ºåºæ­£ç¡®</li>
                <li>æŸ¥çœ‹æ˜¯å¦æœ‰å…¶ä»–JSé”™è¯¯å½±å“</li>
            </ol>
        </div>

        <div id="technicalNotes" style="display: none; margin-top: 20px; padding: 20px; background: #f8fafc; border-radius: 8px;">
            <h4>ğŸ”§ æŠ€æœ¯å®ç°è¯´æ˜</h4>
            
            <p><strong>ä¿®å¤ç­–ç•¥ï¼š</strong></p>
            <div class="code-block">1. è„šæœ¬ä¾èµ–åˆ†æ
   - è¯†åˆ« ConversationEvolutionManager çš„æ‰€æœ‰ä¾èµ–
   - ç¡®å®šæ­£ç¡®çš„åŠ è½½é¡ºåº
   - æ·»åŠ ç¼ºå¤±çš„è„šæœ¬å¼•ç”¨

2. åŠ è½½é¡ºåºä¼˜åŒ–
   - åŸºç¡€å·¥å…·ç±»ä¼˜å…ˆåŠ è½½
   - ä¾èµ–ç±»åœ¨ä½¿ç”¨å‰åŠ è½½
   - ä¸»ç®¡ç†å™¨ç±»æœ€ååŠ è½½

3. é”™è¯¯é¢„é˜²æœºåˆ¶
   - ç¡®ä¿æ‰€æœ‰ç±»åœ¨ä½¿ç”¨å‰å®šä¹‰
   - æ·»åŠ è¿è¡Œæ—¶æ£€æŸ¥
   - æä¾›æ¸…æ™°çš„é”™è¯¯æ¶ˆæ¯</div>
            
            <p><strong>æ¶æ„æ”¹è¿›ï¼š</strong></p>
            <ul>
                <li>æ¨¡å—åŒ–åŠ è½½ï¼šæ¯ä¸ªåŠŸèƒ½æ¨¡å—ç‹¬ç«‹åŠ è½½</li>
                <li>ä¾èµ–ç®¡ç†ï¼šæ˜ç¡®çš„ä¾èµ–å…³ç³»å’ŒåŠ è½½é¡ºåº</li>
                <li>é”™è¯¯éš”ç¦»ï¼šå•ä¸ªæ¨¡å—é”™è¯¯ä¸å½±å“æ•´ä½“ç³»ç»Ÿ</li>
                <li>å¯æ‰©å±•æ€§ï¼šä¾¿äºæ·»åŠ æ–°çš„evolutionåŠŸèƒ½</li>
            </ul>
        </div>

        <div id="troubleshooting" style="display: none; margin-top: 20px; padding: 20px; background: #1f2937; color: #f9fafb; border-radius: 8px;">
            <h4>ğŸ” é—®é¢˜æ’æŸ¥æŒ‡å—</h4>
            
            <p><strong>å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆï¼š</strong></p>
            <div style="background: #374151; padding: 10px; border-radius: 4px; margin: 10px 0;">
âœ… "ConversationEvolutionStorageManager is not defined"
â†’ ç¡®è®¤è„šæœ¬åŠ è½½é¡ºåºå’Œæ–‡ä»¶å­˜åœ¨æ€§

âš ï¸ "Failed to initialize evolution system"  
â†’ æ£€æŸ¥å…¶ä»–ä¾èµ–ç±»æ˜¯å¦æ­£ç¡®åŠ è½½

âŒ "Cannot read properties of undefined"
â†’ éªŒè¯ConfigManagerç­‰æ ¸å¿ƒæ¨¡å—çŠ¶æ€

ğŸ”„ åˆå§‹åŒ–è¶…æ—¶æˆ–æŒ‚èµ·
â†’ æŸ¥çœ‹å¼‚æ­¥æ“ä½œå’ŒPromiseå¤„ç†
            </div>
            
            <p><strong>è°ƒè¯•æ­¥éª¤ï¼š</strong></p>
            <ol>
                <li>æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…· (F12)</li>
                <li>åˆ‡æ¢åˆ° Console æ ‡ç­¾</li>
                <li>é‡æ–°åŠ è½½é¡µé¢è§‚å¯Ÿé”™è¯¯</li>
                <li>åœ¨ Sources æ ‡ç­¾æ£€æŸ¥è„šæœ¬æ–‡ä»¶åŠ è½½</li>
                <li>ä½¿ç”¨ Network æ ‡ç­¾æŸ¥çœ‹è¯·æ±‚çŠ¶æ€</li>
            </ol>
        </div>
    </div>

    <script>
        function showValidationResult() {
            toggleDiv('validationResult');
        }

        function showTechnicalNotes() {
            toggleDiv('technicalNotes');
        }

        function showTroubleshooting() {
            toggleDiv('troubleshooting');
        }

        function toggleDiv(id) {
            const div = document.getElementById(id);
            const allDivs = ['validationResult', 'technicalNotes', 'troubleshooting'];
            
            allDivs.forEach(divId => {
                if (divId !== id) {
                    document.getElementById(divId).style.display = 'none';
                }
            });
            
            if (div.style.display === 'none' || div.style.display === '') {
                div.style.display = 'block';
            } else {
                div.style.display = 'none';
            }
        }
    </script>
</body>
</html> 