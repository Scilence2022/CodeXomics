<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVG Sequence Enhancement Test - Genome AI Studio</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f6fa;
            color: #2c3e50;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            margin: 0 0 10px 0;
            font-size: 32px;
            font-weight: 700;
        }

        .header p {
            margin: 0;
            font-size: 16px;
            opacity: 0.9;
        }

        .content {
            padding: 30px;
        }

        .comparison-section {
            margin-bottom: 40px;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            overflow: hidden;
        }

        .section-header {
            background: #f8f9fa;
            padding: 15px 20px;
            border-bottom: 1px solid #e9ecef;
            font-weight: 600;
            color: #495057;
        }

        .section-content {
            padding: 20px;
        }

        /* Original Background Color Method */
        .original-sequence {
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .original-sequence .base-a { 
            color: #2ecc71; 
            font-weight: 600;
            background: rgba(142, 68, 173, 0.1);
            padding: 1px 2px;
            border-radius: 2px;
        }

        .original-sequence .base-t { 
            color: #e74c3c; 
            font-weight: 600;
            background: rgba(142, 68, 173, 0.1);
            padding: 1px 2px;
            border-radius: 2px;
        }

        .original-sequence .base-g { 
            color: #f39c12; 
            font-weight: 600;
            background: rgba(142, 68, 173, 0.1);
            padding: 1px 2px;
            border-radius: 2px;
        }

        .original-sequence .base-c { 
            color: #3498db; 
            font-weight: 600;
            background: rgba(142, 68, 173, 0.1);
            padding: 1px 2px;
            border-radius: 2px;
        }

        /* SVG Enhanced Method */
        .sequence-bases-container {
            position: relative;
            display: inline-block;
            white-space: nowrap;
            line-height: 20px;
            min-height: 20px;
        }

        .sequence-svg-background {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
            pointer-events: none;
            overflow: visible;
        }

        .sequence-text-layer {
            position: relative;
            z-index: 2;
            font-size: 0;
            line-height: 20px;
            white-space: nowrap;
            display: inline-block;
        }

        .sequence-svg-background rect,
        .sequence-svg-background path {
            transition: opacity 0.2s ease;
        }

        .sequence-svg-background g:hover rect,
        .sequence-svg-background g:hover path {
            opacity: 0.9 !important;
            filter: brightness(1.1);
        }

        .sequence-text-layer .base-a,
        .sequence-text-layer .base-t,
        .sequence-text-layer .base-g,
        .sequence-text-layer .base-c,
        .sequence-text-layer .base-n {
            font-weight: 600;
            text-shadow: 0 0 1px rgba(255, 255, 255, 0.8);
            cursor: default;
        }

        .sequence-text-layer .base-a { 
            color: #2ecc71; /* Green */
        }

        .sequence-text-layer .base-t { 
            color: #e74c3c; /* Red */
        }

        .sequence-text-layer .base-g { 
            color: #f39c12; /* Orange */
        }

        .sequence-text-layer .base-c { 
            color: #3498db; /* Blue */
        }

        .sequence-text-layer .base-n { 
            color: #7f8c8d; /* Grey */
        }

        .enhanced-sequence {
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .benefits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .benefit-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }

        .benefit-card h4 {
            margin: 0 0 10px 0;
            color: #2c3e50;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .benefit-card p {
            margin: 0;
            color: #555;
            font-size: 14px;
            line-height: 1.5;
        }

        .legend {
            background: #f1f3f4;
            padding: 15px;
            border-radius: 6px;
            margin-top: 15px;
        }

        .legend h5 {
            margin: 0 0 10px 0;
            color: #2c3e50;
        }

        .legend-items {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
        }

        .legend-color {
            width: 16px;
            height: 16px;
            border-radius: 3px;
            border: 1px solid #ddd;
        }

        .position-label {
            color: #6c757d;
            font-weight: 600;
            margin-right: 15px;
            text-align: right;
            flex-shrink: 0;
            font-size: 12px;
            width: 80px;
            display: inline-block;
        }

        .sequence-line {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            font-family: 'Courier New', monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🧬 SVG Sequence Enhancement</h1>
            <p>Professional Gene Feature Visualization in Sequence Windows</p>
        </div>

        <div class="content">
            <!-- Comparison Section -->
            <div class="comparison-section">
                <div class="section-header">
                    📊 方案对比：传统背景颜色 vs SVG增强显示
                </div>
                <div class="section-content">
                    <h4>🔸 传统背景颜色方案</h4>
                    <div class="sequence-line">
                        <span class="position-label">1,001</span>
                        <div class="original-sequence">
                            <span class="base-a">A</span><span class="base-t">T</span><span class="base-g">G</span><span class="base-c">C</span><span class="base-a">A</span><span class="base-t">T</span><span class="base-g">G</span><span class="base-c">C</span><span class="base-a">A</span><span class="base-t">T</span><span class="base-g">G</span><span class="base-c">C</span><span class="base-a">A</span><span class="base-t">T</span><span class="base-g">G</span><span class="base-c">C</span><span class="base-a">A</span><span class="base-t">T</span><span class="base-g">G</span><span class="base-c">C</span><span class="base-a">A</span><span class="base-t">T</span><span class="base-g">G</span><span class="base-c">C</span><span class="base-a">A</span><span class="base-t">T</span><span class="base-g">G</span><span class="base-c">C</span><span class="base-a">A</span><span class="base-t">T</span><span class="base-g">G</span><span class="base-c">C</span><span class="base-a">A</span><span class="base-t">T</span><span class="base-g">G</span><span class="base-c">C</span><span class="base-a">A</span><span class="base-t">T</span><span class="base-g">G</span><span class="base-c">C</span><span class="base-a">A</span><span class="base-t">T</span><span class="base-g">G</span><span class="base-c">C</span><span class="base-a">A</span><span class="base-t">T</span><span class="base-g">G</span><span class="base-c">C</span><span class="base-a">A</span><span class="base-t">T</span>
                        </div>
                    </div>

                    <h4>✨ SVG增强显示方案</h4>
                    <div class="sequence-line">
                        <span class="position-label">1,001</span>
                        <div class="sequence-bases-container">
                            <!-- SVG Background Layer -->
                            <svg class="sequence-svg-background" style="width: 600px; height: 20px;">
                                <defs>
                                    <linearGradient id="cds-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" stop-color="#8e44ad" />
                                        <stop offset="100%" stop-color="#a569bd" />
                                    </linearGradient>
                                    <linearGradient id="promoter-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" stop-color="#f1c40f" />
                                        <stop offset="100%" stop-color="#f7dc6f" />
                                    </linearGradient>
                                    <linearGradient id="terminator-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                        <stop offset="0%" stop-color="#d35400" />
                                        <stop offset="100%" stop-color="#ec7063" />
                                    </linearGradient>
                                </defs>
                                
                                <!-- Promoter Arrow -->
                                <g title="promoter (990-1010)">
                                    <path d="M 1 1 L 118 1 L 130 10 L 118 19 L 1 19 Z" 
                                          fill="url(#promoter-gradient)" 
                                          stroke="#b7950b" 
                                          stroke-width="0.5" 
                                          opacity="0.7"/>
                                </g>
                                
                                <!-- CDS Rectangle -->
                                <g title="gene1 CDS (1011-1140)">
                                    <rect x="131" y="1" width="250" height="18" 
                                          fill="url(#cds-gradient)" 
                                          stroke="#6c3483" 
                                          stroke-width="0.5" 
                                          opacity="0.6"/>
                                </g>
                                
                                <!-- Terminator -->
                                <g title="terminator (1141-1160)">
                                    <rect x="381" y="1" width="80" height="18" 
                                          rx="3" ry="3" 
                                          fill="url(#terminator-gradient)" 
                                          stroke="#a93226" 
                                          stroke-width="0.5" 
                                          opacity="0.7"/>
                                </g>
                            </svg>
                            
                            <!-- Text Layer -->
                            <div class="sequence-text-layer">
                                <span class="base-a" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">A</span><span class="base-t" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">T</span><span class="base-g" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">G</span><span class="base-c" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">C</span><span class="base-a" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">A</span><span class="base-t" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">T</span><span class="base-g" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">G</span><span class="base-c" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">C</span><span class="base-a" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">A</span><span class="base-t" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">T</span><span class="base-g" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">G</span><span class="base-c" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">C</span><span class="base-a" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">A</span><span class="base-t" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">T</span><span class="base-g" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">G</span><span class="base-c" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">C</span><span class="base-a" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">A</span><span class="base-t" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">T</span><span class="base-g" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">G</span><span class="base-c" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">C</span><span class="base-a" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">A</span><span class="base-t" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">T</span><span class="base-g" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">G</span><span class="base-c" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">C</span><span class="base-a" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">A</span><span class="base-t" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">T</span><span class="base-g" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">G</span><span class="base-c" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">C</span><span class="base-a" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">A</span><span class="base-t" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">T</span><span class="base-g" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">G</span><span class="base-c" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">C</span><span class="base-a" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">A</span><span class="base-t" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">T</span><span class="base-g" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">G</span><span class="base-c" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">C</span><span class="base-a" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">A</span><span class="base-t" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">T</span><span class="base-g" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">G</span><span class="base-c" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">C</span><span class="base-a" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">A</span><span class="base-t" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">T</span><span class="base-g" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">G</span><span class="base-c" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">C</span><span class="base-a" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">A</span><span class="base-t" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">T</span><span class="base-g" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">G</span><span class="base-c" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">C</span><span class="base-a" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">A</span><span class="base-t" style="font-size: 14px; display: inline-block; width: 12px; text-align: center;">T</span>
                            </div>
                        </div>
                    </div>

                    <div class="legend">
                        <h5>🎨 基因要素图例</h5>
                        <div class="legend-items">
                            <div class="legend-item">
                                <div class="legend-color" style="background: linear-gradient(135deg, #f1c40f, #f7dc6f);"></div>
                                <span>Promoter (箭头形状)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: linear-gradient(135deg, #8e44ad, #a569bd);"></div>
                                <span>CDS (矩形)</span>
                            </div>
                            <div class="legend-item">
                                <div class="legend-color" style="background: linear-gradient(135deg, #d35400, #ec7063);"></div>
                                <span>Terminator (圆角矩形)</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Benefits Section -->
            <div class="comparison-section">
                <div class="section-header">
                    🚀 SVG增强方案的优势
                </div>
                <div class="section-content">
                    <div class="benefits-grid">
                        <div class="benefit-card">
                            <h4>🎨 专业视觉效果</h4>
                            <p>使用与genes & features track相同的专业图形元素，包括箭头、渐变、特殊形状等，提供更清晰的生物学意义表达。</p>
                        </div>
                        
                        <div class="benefit-card">
                            <h4>🔍 更好的区分度</h4>
                            <p>不同基因类型使用专门设计的形状：promoter用箭头、terminator用圆角矩形、RNA用波浪边缘，视觉区分更明确。</p>
                        </div>
                        
                        <div class="benefit-card">
                            <h4>📊 一致性体验</h4>
                            <p>与genes & features track保持视觉一致性，用户无需学习不同的颜色编码系统，降低认知负担。</p>
                        </div>
                        
                        <div class="benefit-card">
                            <h4>⚡ 交互增强</h4>
                            <p>支持悬停效果、渐变动画、工具提示等高级交互功能，提供更丰富的用户体验。</p>
                        </div>
                        
                        <div class="benefit-card">
                            <h4>🔧 可扩展性</h4>
                            <p>SVG架构易于扩展新的基因类型和视觉效果，支持未来功能开发和自定义需求。</p>
                        </div>
                        
                        <div class="benefit-card">
                            <h4>📱 响应式设计</h4>
                            <p>SVG矢量图形在不同分辨率和缩放级别下都能保持清晰，适配各种设备和显示设置。</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Implementation Details -->
            <div class="comparison-section">
                <div class="section-header">
                    🔧 技术实现详情
                </div>
                <div class="section-content">
                    <h4>核心特性</h4>
                    <ul>
                        <li><strong>双层架构</strong>：SVG背景层 + 文本前景层，确保序列文本清晰可读</li>
                        <li><strong>智能合并</strong>：相邻相同特征自动合并为连续区域，避免碎片化显示</li>
                        <li><strong>优先级系统</strong>：CDS > RNA > regulatory，确保重要特征优先显示</li>
                        <li><strong>性能优化</strong>：使用CSS硬件加速和高效的SVG渲染</li>
                        <li><strong>无障碍访问</strong>：支持工具提示、键盘导航和屏幕阅读器</li>
                    </ul>
                    
                    <h4>支持的基因类型</h4>
                    <ul>
                        <li><strong>CDS</strong>：编码序列，使用矩形背景</li>
                        <li><strong>Promoter</strong>：启动子，使用方向性箭头</li>
                        <li><strong>Terminator</strong>：终止子，使用圆角矩形</li>
                        <li><strong>tRNA/rRNA/mRNA</strong>：RNA类型，使用波浪边缘</li>
                        <li><strong>Regulatory</strong>：调控元件，使用菱形形状</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Add interactive demonstrations
        document.addEventListener('DOMContentLoaded', function() {
            const svgElements = document.querySelectorAll('.sequence-svg-background g');
            
            svgElements.forEach(element => {
                element.addEventListener('mouseenter', function() {
                    this.style.cursor = 'pointer';
                    console.log('Hovering over:', this.getAttribute('title'));
                });
                
                element.addEventListener('click', function() {
                    const title = this.getAttribute('title');
                    alert(`点击了基因特征：${title}`);
                });
            });
            
            console.log('SVG Sequence Enhancement Demo Ready');
            console.log('- Traditional method: Simple background colors with limited visual distinction');
            console.log('- SVG Enhanced method: Professional shapes, gradients, and interactive features');
        });
    </script>
</body>
</html> 