<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Evolution System Modules Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            max-width: 800px;
            margin: 0 auto;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }
        .success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .info { background-color: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        pre { background: #f8f9fa; padding: 10px; border-radius: 4px; overflow-x: auto; }
        .test-result { margin: 10px 0; padding: 10px; border-left: 4px solid #007bff; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>🧬 Evolution System Modules Test</h1>
        <p>Testing whether evolution system modules load correctly...</p>
        
        <div id="results"></div>
        
        <button onclick="runTests()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer;">
            🧪 Run Tests
        </button>
        
        <button onclick="testBasicFunctionality()" style="padding: 10px 20px; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer; margin-left: 10px;">
            🔧 Test Basic Functionality
        </button>
    </div>

    <!-- Load evolution system modules -->
    <script src="src/renderer/modules/ConversationAnalysisEngine.js"></script>
    <script src="src/renderer/modules/AutoPluginGenerator.js"></script>
    <script src="src/renderer/modules/EvolutionPluginTestFramework.js"></script>
    <script src="src/renderer/modules/ConversationEvolutionManager.js"></script>
    <script src="src/renderer/modules/EvolutionInterfaceManager.js"></script>
    
    <script>
        function log(message, type = 'info') {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = `status ${type}`;
            div.innerHTML = message;
            results.appendChild(div);
            console.log(message);
        }

        function runTests() {
            document.getElementById('results').innerHTML = '';
            log('🧪 Starting Evolution System Module Tests...', 'info');
            
            const modulesToTest = [
                'ConversationAnalysisEngine',
                'AutoPluginGenerator', 
                'EvolutionPluginTestFramework',
                'ConversationEvolutionManager',
                'EvolutionInterfaceManager'
            ];
            
            let passedTests = 0;
            
            modulesToTest.forEach(moduleName => {
                try {
                    if (window[moduleName]) {
                        if (typeof window[moduleName] === 'function') {
                            log(`✅ ${moduleName} - Class loaded successfully`, 'success');
                            passedTests++;
                        } else {
                            log(`⚠️ ${moduleName} - Found but not a constructor function`, 'error');
                        }
                    } else {
                        log(`❌ ${moduleName} - Not found in window object`, 'error');
                    }
                } catch (error) {
                    log(`❌ ${moduleName} - Error during test: ${error.message}`, 'error');
                }
            });
            
            log(`\n📊 Test Summary: ${passedTests}/${modulesToTest.length} modules loaded successfully`, 
                passedTests === modulesToTest.length ? 'success' : 'error');
                
            if (passedTests === modulesToTest.length) {
                log('🎉 All evolution system modules loaded successfully!', 'success');
            } else {
                log('❌ Some modules failed to load. Check console for errors.', 'error');
            }
        }
        
        function testBasicFunctionality() {
            log('\n🔧 Testing Basic Functionality...', 'info');
            
            try {
                // Test ConversationAnalysisEngine
                if (window.ConversationAnalysisEngine) {
                    const analysisEngine = new ConversationAnalysisEngine();
                    log('✅ ConversationAnalysisEngine - Can be instantiated', 'success');
                } else {
                    log('❌ ConversationAnalysisEngine - Not available for testing', 'error');
                }
                
                // Test AutoPluginGenerator
                if (window.AutoPluginGenerator) {
                    const mockAnalysisEngine = { analyze: () => {} };
                    const pluginGenerator = new AutoPluginGenerator(mockAnalysisEngine);
                    log('✅ AutoPluginGenerator - Can be instantiated', 'success');
                } else {
                    log('❌ AutoPluginGenerator - Not available for testing', 'error');
                }
                
                // Test basic method existence
                if (window.ConversationEvolutionManager) {
                    const mockChatManager = {
                        addConversationUpdateListener: () => {},
                        getConversationHistory: () => []
                    };
                    const mockPluginManager = {
                        registerPlugin: () => {},
                        getPlugins: () => []
                    };
                    const mockConfigManager = {
                        get: () => null,
                        set: () => {}
                    };
                    
                    const evolutionManager = new ConversationEvolutionManager(
                        mockChatManager, mockPluginManager, mockConfigManager
                    );
                    log('✅ ConversationEvolutionManager - Can be instantiated with mock dependencies', 'success');
                    
                    if (window.EvolutionInterfaceManager) {
                        const interfaceManager = new EvolutionInterfaceManager(evolutionManager);
                        log('✅ EvolutionInterfaceManager - Can be instantiated', 'success');
                    }
                } else {
                    log('❌ ConversationEvolutionManager - Not available for advanced testing', 'error');
                }
                
                log('🎉 Basic functionality tests completed!', 'success');
                
            } catch (error) {
                log(`❌ Basic functionality test failed: ${error.message}`, 'error');
                console.error('Full error:', error);
            }
        }
        
        // Auto-run tests when page loads
        window.addEventListener('load', () => {
            setTimeout(runTests, 500);
        });
    </script>
</body>
</html> 